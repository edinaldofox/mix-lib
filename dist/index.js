module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=44)}([function(t,e){t.exports=require("lodash")},function(t,e,r){"use strict";var n=r(6),i=r(0);t.exports={checkState:function(t,e){if(!t)throw new n.InvalidState(e)},checkArgument:function(t,e,r,i){if(!t)throw new n.InvalidArgument(e,r,i)},checkArgumentType:function(t,e,s){if(s=s||"(unknown name)",i.isString(e)){if("Buffer"===e){if(!r(9).Buffer.isBuffer(t))throw new n.InvalidArgumentType(t,e,s)}else if(typeof t!==e)throw new n.InvalidArgumentType(t,e,s)}else if(!(t instanceof e))throw new n.InvalidArgumentType(t,e.name,s)}}},function(t,e,r){"use strict";var n=r(9),i=r(23),s=r(3),o=r(1);function u(t,e){if(t.length!==e.length)return!1;for(var r=t.length,n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}t.exports={fill:function(t,e){o.checkArgumentType(t,"Buffer","buffer"),o.checkArgumentType(e,"number","value");for(var r=t.length,n=0;n<r;n++)t[n]=e;return t},copy:function(t){var e=new Buffer(t.length);return t.copy(e),e},isBuffer:function(t){return n.Buffer.isBuffer(t)||t instanceof Uint8Array},emptyBuffer:function(t){o.checkArgumentType(t,"number","bytes");for(var e=new n.Buffer(t),r=0;r<t;r++)e.write("\0",r);return e},concat:n.Buffer.concat,equals:u,equal:u,integerAsSingleByteBuffer:function(t){return o.checkArgumentType(t,"number","integer"),new n.Buffer([255&t])},integerAsBuffer:function(t){o.checkArgumentType(t,"number","integer");var e=[];return e.push(t>>24&255),e.push(t>>16&255),e.push(t>>8&255),e.push(255&t),new Buffer(e)},integerFromBuffer:function(t){return o.checkArgumentType(t,"Buffer","buffer"),t[0]<<24|t[1]<<16|t[2]<<8|t[3]},integerFromSingleByteBuffer:function(t){return o.checkArgumentType(t,"Buffer","buffer"),t[0]},bufferToHex:function(t){return o.checkArgumentType(t,"Buffer","buffer"),t.toString("hex")},reverse:function(t){for(var e=new n.Buffer(t.length),r=0;r<t.length;r++)e[r]=t[t.length-r-1];return e},hexToBuffer:function(t){return i(s.isHexa(t)),new n.Buffer(t,"hex")}},t.exports.NULL_HASH=t.exports.fill(new Buffer(32),0),t.exports.EMPTY_BUFFER=new Buffer(0)},function(t,e,r){"use strict";var n=r(0),i=function(t){return!!n.isString(t)&&/^[0-9a-fA-F]+$/.test(t)};t.exports={isValidJSON:function(t){var e;if(!n.isString(t))return!1;try{e=JSON.parse(t)}catch(t){return!1}return"object"==typeof e},isHexa:i,isHexaString:i,cloneArray:function(t){return[].concat(t)},defineImmutable:function(t,e){return Object.keys(e).forEach(function(r){Object.defineProperty(t,r,{configurable:!1,enumerable:!0,value:e[r]})}),t},isNaturalNumber:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t&&t>=0}}},function(t,e,r){"use strict";var n=r(33),i=r(1),s=r(0),o=function(t){for(var e=new Buffer(t.length),r=0;r<t.length;r++)e[r]=t[t.length-1-r];return e};n.Zero=new n(0),n.One=new n(1),n.Minus1=new n(-1),n.fromNumber=function(t){return i.checkArgument(s.isNumber(t)),new n(t)},n.fromString=function(t,e){return i.checkArgument(s.isString(t)),new n(t,e)},n.fromBuffer=function(t,e){void 0!==e&&"little"===e.endian&&(t=o(t));var r=t.toString("hex");return new n(r,16)},n.fromSM=function(t,e){var r;if(0===t.length)return n.fromBuffer(new Buffer([0]));var i="big";return e&&(i=e.endian),"little"===i&&(t=o(t)),128&t[0]?(t[0]=127&t[0],(r=n.fromBuffer(t)).neg().copy(r)):r=n.fromBuffer(t),r},n.prototype.toNumber=function(){return parseInt(this.toString(10),10)},n.prototype.toBuffer=function(t){var e,r;if(t&&t.size){var i=(r=this.toString(16,2)).length/2;e=new Buffer(r,"hex"),i===t.size?e=e:i>t.size?e=n.trim(e,i):i<t.size&&(e=n.pad(e,i,t.size))}else r=this.toString(16,2),e=new Buffer(r,"hex");return void 0!==t&&"little"===t.endian&&(e=o(e)),e},n.prototype.toSMBigEndian=function(){var t;return-1===this.cmp(n.Zero)?128&(t=this.neg().toBuffer())[0]?t=Buffer.concat([new Buffer([128]),t]):t[0]=128|t[0]:128&(t=this.toBuffer())[0]&&(t=Buffer.concat([new Buffer([0]),t])),1===t.length&0===t[0]&&(t=new Buffer([])),t},n.prototype.toSM=function(t){var e=t?t.endian:"big",r=this.toSMBigEndian();return"little"===e&&(r=o(r)),r},n.fromScriptNumBuffer=function(t,e,r){var s=r||4;if(i.checkArgument(t.length<=s,new Error("script number overflow")),e&&t.length>0&&0==(127&t[t.length-1])&&(t.length<=1||0==(128&t[t.length-2])))throw new Error("non-minimally encoded script number");return n.fromSM(t,{endian:"little"})},n.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},n.prototype.gt=function(t){return this.cmp(t)>0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.lt=function(t){return this.cmp(t)<0},n.trim=function(t,e){return t.slice(e-t.length,t.length)},n.pad=function(t,e,r){for(var n=new Buffer(r),i=0;i<t.length;i++)n[n.length-1-i]=t[t.length-1-i];for(i=0;i<r-e;i++)n[i]=0;return n},t.exports=n},function(t,e,r){"use strict";r(47);var n=r(48),i=r(35),s=r(2),o=r(1),u=t.exports;u.sha1=function(t){return o.checkArgument(s.isBuffer(t)),i.createHash("sha1").update(t).digest()},u.sha1.blocksize=512,u.sha256=function(t){return o.checkArgument(s.isBuffer(t)),i.createHash("sha256").update(t).digest()},u.sha256.blocksize=512,u.sha256sha256=function(t){return o.checkArgument(s.isBuffer(t)),u.sha256(u.sha256(t))},u.x11=function(t){return o.checkArgument(s.isBuffer(t)),new Buffer.from(n.digest(t,1,1))},u.ripemd160=function(t){return o.checkArgument(s.isBuffer(t)),i.createHash("ripemd160").update(t).digest()},u.sha256ripemd160=function(t){return o.checkArgument(s.isBuffer(t)),u.ripemd160(u.sha256(t))},u.sha512=function(t){return o.checkArgument(s.isBuffer(t)),i.createHash("sha512").update(t).digest()},u.sha512.blocksize=1024,u.hmac=function(t,e,r){o.checkArgument(s.isBuffer(e)),o.checkArgument(s.isBuffer(r)),o.checkArgument(t.blocksize);var n=t.blocksize/8;if(r.length>n)r=t(r);else if(r<n){var i=new Buffer(n);i.fill(0),r.copy(i),r=i}var u=new Buffer(n);u.fill(92);var a=new Buffer(n);a.fill(54);for(var h=new Buffer(n),f=new Buffer(n),c=0;c<n;c++)h[c]=u[c]^r[c],f[c]=a[c]^r[c];return t(Buffer.concat([h,t(Buffer.concat([f,e]))]))},u.sha256hmac=function(t,e){return u.hmac(u.sha256,t,e)},u.sha512hmac=function(t,e){return u.hmac(u.sha512,t,e)}},function(t,e,r){"use strict";var n=r(0);var i=function(t,e){var r=function(){if(n.isString(e.message))this.message=function(t,e){return t.replace("{0}",e[0]).replace("{1}",e[1]).replace("{2}",e[2])}(e.message,arguments);else{if(!n.isFunction(e.message))throw new Error("Invalid error definition for "+e.name);this.message=e.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(r.prototype=Object.create(t.prototype)).name=t.prototype.name+e.name,t[e.name]=r,e.errors&&s(r,e.errors),r},s=function(t,e){n.each(e,function(e){i(t,e)})},o={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};o.Error.prototype=Object.create(Error.prototype),o.Error.prototype.name="bitcore.Error";var u=r(46);!function(t,e){s(t,e)}(o.Error,u),t.exports=o.Error,t.exports.extend=function(t){return i(o.Error,t)}},function(t,e,r){"use strict";var n=r(4),i=r(0),s=r(1),o=r(2),u=r(3),a=function t(e,r){if(!(this instanceof t))return new t(e,r);if(e instanceof n)this.set({r:e,s:r});else if(e){var i=e;this.set(i)}};a.prototype.set=function(t){return this.r=t.r||this.r||void 0,this.s=t.s||this.s||void 0,this.i=void 0!==t.i?t.i:this.i,this.compressed=void 0!==t.compressed?t.compressed:this.compressed,this.nhashtype=t.nhashtype||this.nhashtype||void 0,this},a.fromCompact=function(t){s.checkArgument(o.isBuffer(t),"Argument is expected to be a Buffer");var e=new a,r=!0,i=t.slice(0,1)[0]-27-4;i<0&&(r=!1,i+=4);var u=t.slice(1,33),h=t.slice(33,65);return s.checkArgument(0===i||1===i||2===i||3===i,new Error("i must be 0, 1, 2, or 3")),s.checkArgument(32===u.length,new Error("r must be 32 bytes")),s.checkArgument(32===h.length,new Error("s must be 32 bytes")),e.compressed=r,e.i=i,e.r=n.fromBuffer(u),e.s=n.fromBuffer(h),e},a.fromDER=a.fromBuffer=function(t,e){var r=a.parseDER(t,e),n=new a;return n.r=r.r,n.s=r.s,n},a.fromTxFormat=function(t){var e=t.readUInt8(t.length-1),r=t.slice(0,t.length-1),n=new a.fromDER(r,!1);return n.nhashtype=e,n},a.fromString=function(t){var e=new Buffer(t,"hex");return a.fromDER(e)},a.parseDER=function(t,e){s.checkArgument(o.isBuffer(t),new Error("DER formatted signature should be a buffer")),i.isUndefined(e)&&(e=!0);var r=t[0];s.checkArgument(48===r,new Error("Header byte should be 0x30"));var u=t[1],a=t.slice(2).length;s.checkArgument(!e||u===a,new Error("Length byte should length of what follows")),u=u<a?u:a;var h=t[2];s.checkArgument(2===h,new Error("Integer byte for r should be 0x02"));var f=t[3],c=t.slice(4,4+f),p=n.fromBuffer(c),d=0===t[4];s.checkArgument(f===c.length,new Error("Length of r incorrect"));var l=t[4+f+0];s.checkArgument(2===l,new Error("Integer byte for s should be 0x02"));var g=t[4+f+1],m=t.slice(4+f+2,4+f+2+g),y=n.fromBuffer(m),_=0===t[4+f+2+2];s.checkArgument(g===m.length,new Error("Length of s incorrect"));var b=4+f+2+g;return s.checkArgument(u===b-2,new Error("Length of signature incorrect")),{header:r,length:u,rheader:h,rlength:f,rneg:d,rbuf:c,r:p,sheader:l,slength:g,sneg:_,sbuf:m,s:y}},a.prototype.toCompact=function(t,e){if(t="number"==typeof t?t:this.i,e="boolean"==typeof e?e:this.compressed,0!==t&&1!==t&&2!==t&&3!==t)throw new Error("i must be equal to 0, 1, 2, or 3");var r=t+27+4;!1===e&&(r-=4);var n=new Buffer([r]),i=this.r.toBuffer({size:32}),s=this.s.toBuffer({size:32});return Buffer.concat([n,i,s])},a.prototype.toBuffer=a.prototype.toDER=function(){var t=this.r.toBuffer(),e=this.s.toBuffer(),r=!!(128&t[0]),n=!!(128&e[0]),i=r?Buffer.concat([new Buffer([0]),t]):t,s=n?Buffer.concat([new Buffer([0]),e]):e,o=i.length,u=s.length,a=2+o+2+u;return Buffer.concat([new Buffer([48,a,2,o]),i,new Buffer([2,u]),s])},a.prototype.toString=function(){return this.toDER().toString("hex")},a.isTxDER=function(t){if(t.length<9)return!1;if(t.length>73)return!1;if(48!==t[0])return!1;if(t[1]!==t.length-3)return!1;var e=t[3];if(5+e>=t.length)return!1;var r=t[5+e];if(e+r+7!==t.length)return!1;var n=t.slice(4);if(2!==t[2])return!1;if(0===e)return!1;if(128&n[0])return!1;if(e>1&&0===n[0]&&!(128&n[1]))return!1;var i=t.slice(6+e);return 2===t[6+e-2]&&(0!==r&&(!(128&i[0])&&!(r>1&&0===i[0]&&!(128&i[1]))))},a.prototype.hasLowS=function(){return!this.s.lt(new n(1))&&!this.s.gt(new n("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex"))},a.prototype.hasDefinedHashtype=function(){if(!u.isNaturalNumber(this.nhashtype))return!1;var t=this.nhashtype&~a.SIGHASH_ANYONECANPAY;return!(t<a.SIGHASH_ALL||t>a.SIGHASH_SINGLE)},a.prototype.toTxFormat=function(){var t=this.toDER(),e=new Buffer(1);return e.writeUInt8(this.nhashtype,0),Buffer.concat([t,e])},a.SIGHASH_ALL=1,a.SIGHASH_NONE=2,a.SIGHASH_SINGLE=3,a.SIGHASH_ANYONECANPAY=128,t.exports=a},function(t,e,r){"use strict";var n=r(2),i=r(23),s=function t(e){if(!(this instanceof t))return new t(e);e?this.set(e):this.bufs=[]};s.prototype.set=function(t){return this.bufs=t.bufs||this.bufs||[],this},s.prototype.toBuffer=function(){return this.concat()},s.prototype.concat=function(){return Buffer.concat(this.bufs)},s.prototype.write=function(t){return i(n.isBuffer(t)),this.bufs.push(t),this},s.prototype.writeReverse=function(t){return i(n.isBuffer(t)),this.bufs.push(n.reverse(t)),this},s.prototype.writeUInt8=function(t){var e=new Buffer(1);return e.writeUInt8(t,0),this.write(e),this},s.prototype.writeUInt16BE=function(t){var e=new Buffer(2);return e.writeUInt16BE(t,0),this.write(e),this},s.prototype.writeUInt16LE=function(t){var e=new Buffer(2);return e.writeUInt16LE(t,0),this.write(e),this},s.prototype.writeUInt32BE=function(t){var e=new Buffer(4);return e.writeUInt32BE(t,0),this.write(e),this},s.prototype.writeInt32LE=function(t){var e=new Buffer(4);return e.writeInt32LE(t,0),this.write(e),this},s.prototype.writeUInt32LE=function(t){var e=new Buffer(4);return e.writeUInt32LE(t,0),this.write(e),this},s.prototype.writeUInt64BEBN=function(t){var e=t.toBuffer({size:8});return this.write(e),this},s.prototype.writeUInt64LEBN=function(t){var e=t.toBuffer({size:8});return this.writeReverse(e),this},s.prototype.writeVarintNum=function(t){var e=s.varintBufNum(t);return this.write(e),this},s.prototype.writeVarintBN=function(t){var e=s.varintBufBN(t);return this.write(e),this},s.varintBufNum=function(t){var e=void 0;return t<253?(e=new Buffer(1)).writeUInt8(t,0):t<65536?((e=new Buffer(3)).writeUInt8(253,0),e.writeUInt16LE(t,1)):t<4294967296?((e=new Buffer(5)).writeUInt8(254,0),e.writeUInt32LE(t,1)):((e=new Buffer(9)).writeUInt8(255,0),e.writeInt32LE(-1&t,1),e.writeUInt32LE(Math.floor(t/4294967296),5)),e},s.varintBufBN=function(t){var e=void 0,r=t.toNumber();if(r<253)(e=new Buffer(1)).writeUInt8(r,0);else if(r<65536)(e=new Buffer(3)).writeUInt8(253,0),e.writeUInt16LE(r,1);else if(r<4294967296)(e=new Buffer(5)).writeUInt8(254,0),e.writeUInt32LE(r,1);else{var n=new s;n.writeUInt8(255),n.writeUInt64LEBN(t);e=n.concat()}return e},t.exports=s},function(t,e){t.exports=require("buffer")},function(t,e,r){"use strict";var n=r(4),i=r(17),s=r(5),o=r(3),u=r(16),a=r(0),h=r(1);function f(t,e){if(!(this instanceof f))return new f(t,e);if(h.checkArgument(t,"First argument is required, please include public key data."),t instanceof f)return t;e=e||{};var r=this._classifyArgs(t,e);return r.point.validate(),o.defineImmutable(this,{point:r.point,compressed:r.compressed,network:r.network||u.defaultNetwork}),this}f.prototype._classifyArgs=function(t,e){var r={compressed:a.isUndefined(e.compressed)||e.compressed};if(t instanceof i)r.point=t;else if(t.x&&t.y)r=f._transformObject(t);else if("string"==typeof t)r=f._transformDER(new Buffer(t,"hex"));else if(f._isBuffer(t))r=f._transformDER(t);else{if(!f._isPrivateKey(t))throw new TypeError("First argument is an unrecognized data format.");r=f._transformPrivateKey(t)}return r.network||(r.network=a.isUndefined(e.network)?void 0:u.get(e.network)),r},f._isPrivateKey=function(t){return t instanceof r(18)},f._isBuffer=function(t){return t instanceof Buffer||t instanceof Uint8Array},f._transformPrivateKey=function(t){h.checkArgument(f._isPrivateKey(t),"Must be an instance of PrivateKey");var e={};return e.point=i.getG().mul(t.bn),e.compressed=t.compressed,e.network=t.network,e},f._transformDER=function(t,e){h.checkArgument(f._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r,s,o,u,c={};if(e=!!a.isUndefined(e)||e,4!==t[0]&&(e||6!==t[0]&&7!==t[0]))if(3===t[0])o=t.slice(1),r=new n(o),(c=f._transformX(!0,r)).compressed=!0;else{if(2!==t[0])throw new TypeError("Invalid DER format public key");o=t.slice(1),r=new n(o),(c=f._transformX(!1,r)).compressed=!0}else{if(o=t.slice(1,33),u=t.slice(33,65),32!==o.length||32!==u.length||65!==t.length)throw new TypeError("Length of x and y must be 32 bytes");r=new n(o),s=new n(u),c.point=new i(r,s),c.compressed=!1}return c},f._transformX=function(t,e){h.checkArgument("boolean"==typeof t,"Must specify whether y is odd or not (true or false)");var r={};return r.point=i.fromX(t,e),r},f._transformObject=function(t){var e=new n(t.x,"hex"),r=new n(t.y,"hex");return new f(new i(e,r),{compressed:t.compressed})},f.fromPrivateKey=function(t){h.checkArgument(f._isPrivateKey(t),"Must be an instance of PrivateKey");var e=f._transformPrivateKey(t);return new f(e.point,{compressed:e.compressed,network:e.network})},f.fromDER=f.fromBuffer=function(t,e){h.checkArgument(f._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r=f._transformDER(t,e);return new f(r.point,{compressed:r.compressed})},f.fromPoint=function(t,e){return h.checkArgument(t instanceof i,"First argument must be an instance of Point."),new f(t,{compressed:e})},f.fromString=function(t,e){var r=new Buffer(t,e||"hex"),n=f._transformDER(r);return new f(n.point,{compressed:n.compressed})},f.fromX=function(t,e){var r=f._transformX(t,e);return new f(r.point,{compressed:r.compressed})},f.getValidationError=function(t){var e;try{new f(t)}catch(t){e=t}return e},f.isValid=function(t){return!f.getValidationError(t)},f.prototype.toObject=f.prototype.toJSON=function(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},f.prototype.toBuffer=f.prototype.toDER=function(){var t,e=this.point.getX(),r=this.point.getY(),n=e.toBuffer({size:32}),i=r.toBuffer({size:32});return this.compressed?(t=i[i.length-1]%2?new Buffer([3]):new Buffer([2]),Buffer.concat([t,n])):(t=new Buffer([4]),Buffer.concat([t,n,i]))},f.prototype._getID=function(){return s.sha256ripemd160(this.toBuffer())},f.prototype.toAddress=function(t){return r(12).fromPublicKey(this,t||this.network)},f.prototype.toString=function(){return this.toDER().toString("hex")},f.prototype.inspect=function(){return"<PublicKey: "+this.toString()+(this.compressed?"":", uncompressed")+">"},t.exports=f},function(t,e,r){t.exports=r(37),t.exports.Interpreter=r(50)},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(6),o=r(19),u=r(16),a=r(5),h=r(3),f=r(10);function c(t,e,r){if(!(this instanceof c))return new c(t,e,r);if(n.isArray(t)&&n.isNumber(e))return c.createMultisig(t,e,r);if(t instanceof c)return t;if(i.checkArgument(t,"First argument is required, please include address data.","guide/address.html"),e&&!u.get(e))throw new TypeError('Second argument must be "livenet" or "testnet".');if(r&&r!==c.PayToPublicKeyHash&&r!==c.PayToScriptHash)throw new TypeError('Third argument must be "pubkeyhash" or "scripthash".');var s=this._classifyArguments(t,e,r);return s.network=s.network||u.get(e)||u.defaultNetwork,s.type=s.type||r||c.PayToPublicKeyHash,h.defineImmutable(this,{hashBuffer:s.hashBuffer,network:s.network,type:s.type}),this}c.prototype._classifyArguments=function(t,e,r){if((t instanceof Buffer||t instanceof Uint8Array)&&20===t.length)return c._transformHash(t);if((t instanceof Buffer||t instanceof Uint8Array)&&21===t.length)return c._transformBuffer(t,e,r);if(t instanceof f)return c._transformPublicKey(t);if(t instanceof p)return c._transformScript(t,e);if("string"==typeof t)return c._transformString(t,e,r);if(n.isObject(t))return c._transformObject(t);throw new TypeError("First argument is an unrecognized data format.")},c.PayToPublicKeyHash="pubkeyhash",c.PayToScriptHash="scripthash",c._transformHash=function(t){var e={};if(!(t instanceof Buffer||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==t.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return e.hashBuffer=t,e},c._transformObject=function(t){return i.checkArgument(t.hash||t.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),i.checkArgument(t.type,"Must provide a `type` property"),{hashBuffer:t.hash?new Buffer(t.hash,"hex"):t.hashBuffer,network:u.get(t.network)||u.defaultNetwork,type:t.type}},c._classifyFromVersion=function(t){var e={},r=u.get(t[0],"pubkeyhash"),n=u.get(t[0],"scripthash");return r?(e.network=r,e.type=c.PayToPublicKeyHash):n&&(e.network=n,e.type=c.PayToScriptHash),e},c._transformBuffer=function(t,e,r){var n={};if(!(t instanceof Buffer||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(21!==t.length)throw new TypeError("Address buffers must be exactly 21 bytes.");e=u.get(e);var i=c._classifyFromVersion(t);if(!i.network||e&&e!==i.network)throw new TypeError("Address has mismatched network type.");if(!i.type||r&&r!==i.type)throw new TypeError("Address has mismatched type.");return n.hashBuffer=t.slice(1),n.network=i.network,n.type=i.type,n},c._transformPublicKey=function(t){var e={};if(!(t instanceof f))throw new TypeError("Address must be an instance of PublicKey.");return e.hashBuffer=a.sha256ripemd160(t.toBuffer()),e.type=c.PayToPublicKeyHash,e},c._transformScript=function(t,e){i.checkArgument(t instanceof p,"script must be a Script instance");var r=t.getAddressInfo(e);if(!r)throw new s.Script.CantDeriveAddress(t);return r},c.createMultisig=function(t,e,r){return r=r||t[0].network||u.defaultNetwork,c.payingTo(p.buildMultisigOut(t,e),r)},c._transformString=function(t,e,r){if("string"!=typeof t)throw new TypeError("data parameter supplied is not a string.");t=t.trim();var n=o.decode(t);return c._transformBuffer(n,e,r)},c.fromPublicKey=function(t,e){var r=c._transformPublicKey(t);return e=e||u.defaultNetwork,new c(r.hashBuffer,e,r.type)},c.fromPublicKeyHash=function(t,e){return new c(c._transformHash(t).hashBuffer,e,c.PayToPublicKeyHash)},c.fromScriptHash=function(t,e){return i.checkArgument(t,"hash parameter is required"),new c(c._transformHash(t).hashBuffer,e,c.PayToScriptHash)},c.payingTo=function(t,e){return i.checkArgument(t,"script is required"),i.checkArgument(t instanceof p,"script must be instance of Script"),c.fromScriptHash(a.sha256ripemd160(t.toBuffer()),e)},c.fromScript=function(t,e){i.checkArgument(t instanceof p,"script must be a Script instance");var r=c._transformScript(t,e);return new c(r.hashBuffer,e,r.type)},c.fromBuffer=function(t,e,r){var n=c._transformBuffer(t,e,r);return new c(n.hashBuffer,n.network,n.type)},c.fromString=function(t,e,r){var n=c._transformString(t,e,r);return new c(n.hashBuffer,n.network,n.type)},c.fromObject=function(t){return i.checkState(h.isHexa(t.hash),'Unexpected hash property, "'+t.hash+'", expected to be hex.'),new c(new Buffer(t.hash,"hex"),t.network,t.type)},c.getValidationError=function(t,e,r){var n;try{new c(t,e,r)}catch(t){n=t}return n},c.isValid=function(t,e,r){return!c.getValidationError(t,e,r)},c.prototype.isPayToPublicKeyHash=function(){return this.type===c.PayToPublicKeyHash},c.prototype.isPayToScriptHash=function(){return this.type===c.PayToScriptHash},c.prototype.toBuffer=function(){var t=new Buffer([this.network[this.type]]);return Buffer.concat([t,this.hashBuffer])},c.prototype.toObject=c.prototype.toJSON=function(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}},c.prototype.toString=function(){return o.encode(this.toBuffer())},c.prototype.inspect=function(){return"<Address: "+this.toString()+", type: "+this.type+", network: "+this.network+">"},t.exports=c;var p=r(11)},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(2),o=r(4),u=function t(e){if(!(this instanceof t))return new t(e);if(!n.isUndefined(e))if(Buffer.isBuffer(e))this.set({buf:e});else if(n.isString(e))this.set({buf:new Buffer(e,"hex")});else{if(!n.isObject(e))throw new TypeError("Unrecognized argument for BufferReader");var r=e;this.set(r)}};u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this.pos=t.pos||this.pos||0,this},u.prototype.eof=function(){return this.pos>=this.buf.length},u.prototype.finished=u.prototype.eof,u.prototype.read=function(t){i.checkArgument(!n.isUndefined(t),"Must specify a length");var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,e},u.prototype.readAll=function(){var t=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,t},u.prototype.readUInt8=function(){var t=this.buf.readUInt8(this.pos);return this.pos=this.pos+1,t},u.prototype.readUInt16BE=function(){var t=this.buf.readUInt16BE(this.pos);return this.pos=this.pos+2,t},u.prototype.readUInt16LE=function(){var t=this.buf.readUInt16LE(this.pos);return this.pos=this.pos+2,t},u.prototype.readUInt32BE=function(){var t=this.buf.readUInt32BE(this.pos);return this.pos=this.pos+4,t},u.prototype.readUInt32LE=function(){var t=this.buf.readUInt32LE(this.pos);return this.pos=this.pos+4,t},u.prototype.readInt32LE=function(){var t=this.buf.readInt32LE(this.pos);return this.pos=this.pos+4,t},u.prototype.readUInt64BEBN=function(){var t=this.buf.slice(this.pos,this.pos+8),e=o.fromBuffer(t);return this.pos=this.pos+8,e},u.prototype.readUInt64LEBN=function(){var t,e=this.buf.readUInt32LE(this.pos),r=4294967296*this.buf.readUInt32LE(this.pos+4)+e;if(r<=9007199254740991)t=new o(r);else{var n=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);t=new o(n,10,"le")}return this.pos=this.pos+8,t},u.prototype.readVarintNum=function(){var t=this.readUInt8();switch(t){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var e=this.readUInt64LEBN().toNumber();if(e<=Math.pow(2,53))return e;throw new Error("number too large to retain precision - use readVarintBN");default:return t}},u.prototype.readVarLengthBuffer=function(){var t=this.readVarintNum(),e=this.read(t);return i.checkState(e.length===t,"Invalid length while reading varlength buffer. Expected to read: "+t+" and read "+e.length),e},u.prototype.readVarintBuf=function(){switch(this.buf.readUInt8(this.pos)){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}},u.prototype.readVarintBN=function(){var t=this.readUInt8();switch(t){case 253:return new o(this.readUInt16LE());case 254:return new o(this.readUInt32LE());case 255:return this.readUInt64LEBN();default:return new o(t)}},u.prototype.reverse=function(){for(var t=new Buffer(this.buf.length),e=0;e<t.length;e++)t[e]=this.buf[this.buf.length-1-e];return this.buf=t,this},u.prototype.readReverse=function(t){n.isUndefined(t)&&(t=this.buf.length);var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,s.reverse(e)},t.exports=u},function(t,e,r){"use strict";var n=r(9),i=r(7),s=r(11),o=r(15),u=r(13),a=r(8),h=r(4),f=r(5),c=r(28),p=r(1),d=r(0),l=function(t,e,c,p){var d,l=r(30),g=r(31),m=l.shallowCopy(t);for((p=new s(p)).removeCodeseparators(),d=0;d<m.inputs.length;d++)m.inputs[d]=new g(m.inputs[d]).setScript(s.empty());if(m.inputs[c]=new g(m.inputs[c]).setScript(p),(31&e)===i.SIGHASH_NONE||(31&e)===i.SIGHASH_SINGLE)for(d=0;d<m.inputs.length;d++)d!==c&&(m.inputs[d].sequenceNumber=0);if((31&e)===i.SIGHASH_NONE)m.outputs=[];else if((31&e)===i.SIGHASH_SINGLE){if(c>=m.outputs.length)return new Buffer("0000000000000000000000000000000000000000000000000000000000000001","hex");for(m.outputs.length=c+1,d=0;d<c;d++)m.outputs[d]=new o({satoshis:h.fromBuffer(new n.Buffer("ffffffffffffffff","hex")),script:s.empty()})}e&i.SIGHASH_ANYONECANPAY&&(m.inputs=[m.inputs[c]]);var y=(new a).write(m.toBuffer()).writeInt32LE(e).toBuffer(),_=f.sha256sha256(y);return _=new u(_).readReverse()};t.exports={sighash:l,sign:function(t,e,r,n,i){var s=l(t,r,n,i);return c.sign(s,e,"little").set({nhashtype:r})},verify:function(t,e,r,n,i){p.checkArgument(!d.isUndefined(t)),p.checkArgument(!d.isUndefined(e)&&!d.isUndefined(e.nhashtype));var s=l(t,e.nhashtype,n,i);return c.verify(s,e,r,"little")}}},function(t,e,r){"use strict";var n=r(0),i=r(4),s=r(9),o=r(2),u=r(3),a=r(8),h=r(11),f=r(1),c=r(6);function p(t){if(!(this instanceof p))return new p(t);if(!n.isObject(t))throw new TypeError("Unrecognized argument for Output");var e;this.satoshis=t.satoshis,o.isBuffer(t.script)?this._scriptBuffer=t.script:(e=n.isString(t.script)&&u.isHexa(t.script)?new s.Buffer(t.script,"hex"):t.script,this.setScript(e))}Object.defineProperty(p.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this._script?this._script:(this.setScriptFromBuffer(this._scriptBuffer),this._script)}}),Object.defineProperty(p.prototype,"satoshis",{configurable:!1,enumerable:!0,get:function(){return this._satoshis},set:function(t){t instanceof i?(this._satoshisBN=t,this._satoshis=t.toNumber()):n.isString(t)?(this._satoshis=parseInt(t),this._satoshisBN=i.fromNumber(this._satoshis)):(f.checkArgument(u.isNaturalNumber(t),"Output satoshis is not a natural number"),this._satoshisBN=i.fromNumber(t),this._satoshis=t),f.checkState(u.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),p.prototype.invalidSatoshis=function(){return this._satoshis>9007199254740991?"transaction txout satoshis greater than max safe integer":this._satoshis!==this._satoshisBN.toNumber()?"transaction txout satoshis has corrupted value":this._satoshis<0&&"transaction txout negative"},p.prototype.toObject=p.prototype.toJSON=function(){var t={satoshis:this.satoshis};return t.script=this._scriptBuffer.toString("hex"),t},p.fromObject=function(t){return new p(t)},p.prototype.setScriptFromBuffer=function(t){this._scriptBuffer=t;try{this._script=h.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(t){if(!(t instanceof c.Script.InvalidBuffer))throw t;this._script=null}},p.prototype.setScript=function(t){if(t instanceof h)this._scriptBuffer=t.toBuffer(),this._script=t,this._script._isOutput=!0;else if(n.isString(t))this._script=h.fromString(t),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!o.isBuffer(t))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(t)}return this},p.prototype.inspect=function(){var t;return t=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output ("+this.satoshis+" sats) "+t+">"},p.fromBufferReader=function(t){var e={};e.satoshis=t.readUInt64LEBN();var r=t.readVarintNum();return e.script=0!==r?t.read(r):new s.Buffer([]),new p(e)},p.prototype.toBufferWriter=function(t){t||(t=new a),t.writeUInt64LEBN(this._satoshisBN);var e=this._scriptBuffer;return t.writeVarintNum(e.length),t.write(e),t},t.exports=p},function(t,e,r){"use strict";var n=r(0),i=r(2),s=r(3),o=r(49),u=[],a={};function h(){}function f(t,e){if(~u.indexOf(t))return t;if(!e)return a[t];n.isArray(e)||(e=[e]);var r=function(e){return u[i][e]===t};for(var i in u)if(n.some(e,r))return u[i]}function c(t){var e=new h;return s.defineImmutable(e,{name:t.name,alias:t.alias,pubkeyhash:t.pubkeyhash,privatekey:t.privatekey,scripthash:t.scripthash,xpubkey:t.xpubkey,xprivkey:t.xprivkey}),t.networkMagic&&s.defineImmutable(e,{networkMagic:i.integerAsBuffer(t.networkMagic)}),t.port&&s.defineImmutable(e,{port:t.port}),t.dnsSeeds&&s.defineImmutable(e,{dnsSeeds:t.dnsSeeds}),n.each(e,function(t){n.isUndefined(t)||n.isObject(t)||(a[t]=e)}),u.push(e),e}for(var p in h.prototype.toString=function(){return this.name},o){c(o[p])}var d=f("GEEK");c({name:"testnet",alias:"regtest",pubkeyhash:140,privatekey:239,scripthash:19,xpubkey:70617039,xprivkey:70615956});var l=f("testnet"),g={PORT:19999,NETWORK_MAGIC:i.integerAsBuffer(3470969599),DNS_SEEDS:["testnet-seed.darkcoin.io","testnet-seed.dashdot.io","test.dnsseed.masternode.io"]};for(var m in g)n.isObject(g[m])||(a[g[m]]=l);var y={PORT:19994,NETWORK_MAGIC:i.integerAsBuffer(4240553948),DNS_SEEDS:[]};for(var m in y)n.isObject(y[m])||(a[y[m]]=l);Object.defineProperty(l,"port",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?y.PORT:g.PORT}}),Object.defineProperty(l,"networkMagic",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?y.NETWORK_MAGIC:g.NETWORK_MAGIC}}),Object.defineProperty(l,"dnsSeeds",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?y.DNS_SEEDS:g.DNS_SEEDS}}),t.exports={add:c,remove:function(t){for(var e=0;e<u.length;e++)u[e]===t&&u.splice(e,1);for(var r in a)a[r]===t&&delete a[r]},defaultNetwork:d,livenet:d,mainnet:d,testnet:l,get:f,enableRegtest:function(){l.regtestEnabled=!0},disableRegtest:function(){l.regtestEnabled=!1}}},function(t,e,r){"use strict";var n=r(4),i=r(2),s=r(34).curves.secp256k1,o=s.curve.point.bind(s.curve),u=s.curve.pointFromX.bind(s.curve),a=function(t,e,r){var n=o(t,e,r);return n.validate(),n};a.prototype=Object.getPrototypeOf(s.curve.point()),a.fromX=function(t,e){var r=u(t,e);return r.validate(),r},a.getG=function(){return s.curve.g},a.getN=function(){return new n(s.curve.n.toArray())},a.prototype._getX||(a.prototype._getX=a.prototype.getX),a.prototype.getX=function(){return new n(this._getX().toArray())},a.prototype._getY||(a.prototype._getY=a.prototype.getY),a.prototype.getY=function(){return new n(this._getY().toArray())},a.prototype.validate=function(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");if(0===this.getX().cmp(n.Zero)||0===this.getY().cmp(n.Zero))throw new Error("Invalid x,y value for curve, cannot equal 0.");if(0!==u(this.getY().isOdd(),this.getX()).y.cmp(this.y))throw new Error("Invalid y value for curve.");var t=this.getX().gt(n.Minus1)&&this.getX().lt(a.getN()),e=this.getY().gt(n.Minus1)&&this.getY().lt(a.getN());if(!t||!e)throw new Error("Point does not lie on the curve");if(!this.mul(a.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},a.pointToCompressed=function(t){var e,r=t.getX().toBuffer({size:32}),n=t.getY().toBuffer({size:32});return e=n[n.length-1]%2?new Buffer([3]):new Buffer([2]),i.concat([e,r])},t.exports=a},function(t,e,r){"use strict";var n=r(0),i=r(12),s=r(19),o=r(4),u=r(3),a=r(16),h=r(17),f=r(10),c=r(26),p=r(1);function d(t,e){if(!(this instanceof d))return new d(t,e);if(t instanceof d)return t;var r=this._classifyArguments(t,e);if(!r.bn||0===r.bn.cmp(new o(0)))throw new TypeError("Number cannot be equal to zero, undefined, null or false");if(!r.bn.lt(h.getN()))throw new TypeError("Number must be less than N");if(void 0===r.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return u.defineImmutable(this,{bn:r.bn,compressed:r.compressed,network:r.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}d.prototype._classifyArguments=function(t,e){var r={compressed:!0,network:e?a.get(e):a.defaultNetwork};if(n.isUndefined(t)||n.isNull(t))r.bn=d._getRandomBN();else if(t instanceof o)r.bn=t;else if(t instanceof Buffer||t instanceof Uint8Array)r=d._transformBuffer(t,e);else if(t.bn&&t.network)r=d._transformObject(t);else if(!e&&a.get(t))r.bn=d._getRandomBN(),r.network=a.get(t);else{if("string"!=typeof t)throw new TypeError("First argument is an unrecognized data type.");u.isHexa(t)?r.bn=new o(new Buffer(t,"hex")):r=d._transformWIF(t,e)}return r},d._getRandomBN=function(){var t,e;do{var r=c.getRandomBuffer(32);t=(e=o.fromBuffer(r)).lt(h.getN())}while(!t);return e},d._transformBuffer=function(t,e){var r={};if(32===t.length)return d._transformBNBuffer(t,e);if(r.network=a.get(t[0],"privatekey"),!r.network)throw new Error("Invalid network");if(e&&r.network!==a.get(e))throw new TypeError("Private key network mismatch");if(34===t.length&&1===t[33])r.compressed=!0;else{if(33!==t.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");r.compressed=!1}return r.bn=o.fromBuffer(t.slice(1,33)),r},d._transformBNBuffer=function(t,e){var r={};return r.network=a.get(e)||a.defaultNetwork,r.bn=o.fromBuffer(t),r.compressed=!1,r},d._transformWIF=function(t,e){return d._transformBuffer(s.decode(t),e)},d.fromBuffer=function(t,e){return new d(t,e)},d._transformObject=function(t){return{bn:new o(t.bn,"hex"),network:a.get(t.network),compressed:t.compressed}},d.fromString=d.fromWIF=function(t){return p.checkArgument(n.isString(t),"First argument is expected to be a string."),new d(t)},d.fromObject=function(t){return p.checkArgument(n.isObject(t),"First argument is expected to be an object."),new d(t)},d.fromRandom=function(t){return new d(d._getRandomBN(),t)},d.getValidationError=function(t,e){var r;try{new d(t,e)}catch(t){r=t}return r},d.isValid=function(t,e){return!!t&&!d.getValidationError(t,e)},d.prototype.toString=function(){return this.toBuffer().toString("hex")},d.prototype.toWIF=function(){var t,e=this.network;return t=this.compressed?Buffer.concat([new Buffer([e.privatekey]),this.bn.toBuffer({size:32}),new Buffer([1])]):Buffer.concat([new Buffer([e.privatekey]),this.bn.toBuffer({size:32})]),s.encode(t)},d.prototype.toBigNumber=function(){return this.bn},d.prototype.toBuffer=function(){return this.bn.toBuffer()},d.prototype.toBufferNoPadding=function(){return this.bn.toBuffer()},d.prototype.toPublicKey=function(){return this._pubkey||(this._pubkey=f.fromPrivateKey(this)),this._pubkey},d.prototype.toAddress=function(t){var e=this.toPublicKey();return i.fromPublicKey(e,t||this.network)},d.prototype.toObject=d.prototype.toJSON=function(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},d.prototype.inspect=function(){var t=this.compressed?"":", uncompressed";return"<PrivateKey: "+this.toString()+", network: "+this.network+t+">"},t.exports=d},function(t,e,r){"use strict";var n=r(0),i=r(24),s=r(9),o=r(5).sha256sha256,u=function t(e){if(!(this instanceof t))return new t(e);if(Buffer.isBuffer(e)){var r=e;this.fromBuffer(r)}else if("string"==typeof e){var n=e;this.fromString(n)}else e&&this.set(e)};u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},u.validChecksum=function(t,e){return n.isString(t)&&(t=new s.Buffer(i.decode(t))),n.isString(e)&&(e=new s.Buffer(i.decode(e))),e||(e=t.slice(-4),t=t.slice(0,-4)),u.checksum(t).toString("hex")===e.toString("hex")},u.decode=function(t){if("string"!=typeof t)throw new Error("Input must be a string");var e=new Buffer(i.decode(t));if(e.length<4)throw new Error("Input string too short");var r=e.slice(0,-4),n=e.slice(-4),s=o(r).slice(0,4);if(n.toString("hex")!==s.toString("hex"))throw new Error("Checksum mismatch");return r},u.checksum=function(t){return o(t).slice(0,4)},u.encode=function(t){if(!Buffer.isBuffer(t))throw new Error("Input must be a buffer");var e=new Buffer(t.length+4),r=u.checksum(t);return t.copy(e),r.copy(e,t.length),i.encode(e)},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromString=function(t){var e=u.decode(t);return this.buf=e,this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toString=function(){return u.encode(this.buf)},t.exports=u},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(6),o=r(8),u=r(9),a=r(2),h=r(3),f=r(11),c=r(14),p=r(15);function d(t){return this instanceof d?t?this._fromObject(t):void 0:new d(t)}d.MAXINT=4294967295,d.DEFAULT_SEQNUMBER=4294967295,d.DEFAULT_LOCKTIME_SEQNUMBER=4294967294,d.DEFAULT_RBF_SEQNUMBER=4294967293,Object.defineProperty(d.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this.isNull()?null:(this._script||(this._script=new f(this._scriptBuffer),this._script._isInput=!0),this._script)}}),d.fromObject=function(t){return i.checkArgument(n.isObject(t)),(new d)._fromObject(t)},d.prototype._fromObject=function(t){var e;if(e=n.isString(t.prevTxId)&&h.isHexa(t.prevTxId)?new u.Buffer(t.prevTxId,"hex"):t.prevTxId,this.output=t.output?t.output instanceof p?t.output:new p(t.output):void 0,this.prevTxId=e||t.txidbuf,this.outputIndex=n.isUndefined(t.outputIndex)?t.txoutnum:t.outputIndex,this.sequenceNumber=n.isUndefined(t.sequenceNumber)?n.isUndefined(t.seqnum)?4294967295:t.seqnum:t.sequenceNumber,n.isUndefined(t.script)&&n.isUndefined(t.scriptBuffer))throw new s.Transaction.Input.MissingScript;return this.setScript(t.scriptBuffer||t.script),this},d.prototype.toObject=d.prototype.toJSON=function(){var t={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex")};return this.script&&(t.scriptString=this.script.toString()),this.output&&(t.output=this.output.toObject()),t},d.fromBufferReader=function(t){var e=new d;return e.prevTxId=t.readReverse(32),e.outputIndex=t.readUInt32LE(),e._scriptBuffer=t.readVarLengthBuffer(),e.sequenceNumber=t.readUInt32LE(),e},d.prototype.toBufferWriter=function(t){t||(t=new o),t.writeReverse(this.prevTxId),t.writeUInt32LE(this.outputIndex);var e=this._scriptBuffer;return t.writeVarintNum(e.length),t.write(e),t.writeUInt32LE(this.sequenceNumber),t},d.prototype.setScript=function(t){if(this._script=null,t instanceof f)this._script=t,this._script._isInput=!0,this._scriptBuffer=t.toBuffer();else if(h.isHexa(t))this._scriptBuffer=new u.Buffer(t,"hex");else if(n.isString(t))this._script=new f(t),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!a.isBuffer(t))throw new TypeError("Invalid argument type: script");this._scriptBuffer=new u.Buffer(t)}return this},d.prototype.getSignatures=function(){throw new s.AbstractMethodInvoked("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: "+JSON.stringify(this))},d.prototype.isFullySigned=function(){throw new s.AbstractMethodInvoked("Input#isFullySigned")},d.prototype.isFinal=function(){return 4294967295!==this.sequenceNumber},d.prototype.addSignature=function(){throw new s.AbstractMethodInvoked("Input#addSignature")},d.prototype.clearSignatures=function(){throw new s.AbstractMethodInvoked("Input#clearSignatures")},d.prototype.isValidSignature=function(t,e){return e.signature.nhashtype=e.sigtype,c.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script)},d.prototype.isNull=function(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex},d.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length},t.exports=d},function(t,e){t.exports=require("inherits")},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(21),o=r(2),u=r(3),a=r(10),h=r(6),f=r(7);function c(t){if(!(this instanceof c))return new c(t);if(t instanceof c)return t;if(n.isObject(t))return this._fromObject(t);throw new h.InvalidArgument("TransactionSignatures must be instantiated from an object")}s(c,f),c.prototype._fromObject=function(t){return this._checkObjectArgs(t),this.publicKey=new a(t.publicKey),this.prevTxId=o.isBuffer(t.prevTxId)?t.prevTxId:new Buffer(t.prevTxId,"hex"),this.outputIndex=t.outputIndex,this.inputIndex=t.inputIndex,this.signature=t.signature instanceof f?t.signature:o.isBuffer(t.signature)?f.fromBuffer(t.signature):f.fromString(t.signature),this.sigtype=t.sigtype,this},c.prototype._checkObjectArgs=function(t){i.checkArgument(a(t.publicKey),"publicKey"),i.checkArgument(!n.isUndefined(t.inputIndex),"inputIndex"),i.checkArgument(!n.isUndefined(t.outputIndex),"outputIndex"),i.checkState(n.isNumber(t.inputIndex),"inputIndex must be a number"),i.checkState(n.isNumber(t.outputIndex),"outputIndex must be a number"),i.checkArgument(t.signature,"signature"),i.checkArgument(t.prevTxId,"prevTxId"),i.checkState(t.signature instanceof f||o.isBuffer(t.signature)||u.isHexa(t.signature),"signature must be a buffer or hexa value"),i.checkState(o.isBuffer(t.prevTxId)||u.isHexa(t.prevTxId),"prevTxId must be a buffer or hexa value"),i.checkArgument(t.sigtype,"sigtype"),i.checkState(n.isNumber(t.sigtype),"sigtype must be a number")},c.prototype.toObject=c.prototype.toJSON=function(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},c.fromObject=function(t){return i.checkArgument(t),new c(t)},t.exports=c},function(t,e){t.exports=require("assert")},function(t,e,r){"use strict";var n=r(0),i=r(36),s=r(9),o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".split(""),u=function t(e){if(!(this instanceof t))return new t(e);if(Buffer.isBuffer(e)){var r=e;this.fromBuffer(r)}else if("string"==typeof e){var n=e;this.fromString(n)}else e&&this.set(e)};u.validCharacters=function(t){return s.Buffer.isBuffer(t)&&(t=t.toString()),n.every(n.map(t,function(t){return n.includes(o,t)}))},u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},u.encode=function(t){if(!s.Buffer.isBuffer(t))throw new Error("Input should be a buffer");return i.encode(t)},u.decode=function(t){if("string"!=typeof t)throw new Error("Input should be a string");return new Buffer(i.decode(t))},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromString=function(t){var e=u.decode(t);return this.buf=e,this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toString=function(){return u.encode(this.buf)},t.exports=u},function(t,e,r){t.exports=r(30),t.exports.Input=r(31),t.exports.Output=r(15),t.exports.UnspentOutput=r(39),t.exports.Signature=r(22),t.exports.Sighash=r(14)},function(t,e,r){"use strict";function n(){}n.getRandomBuffer=function(t){return process.browser?n.getRandomBufferBrowser(t):n.getRandomBufferNode(t)},n.getRandomBufferNode=function(t){return r(35).randomBytes(t)},n.getRandomBufferBrowser=function(t){if(!window.crypto&&!window.msCrypto)throw new Error("window.crypto not available");if(window.crypto&&window.crypto.getRandomValues)var e=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");e=window.msCrypto}var r=new Uint8Array(t);return e.getRandomValues(r),new Buffer(r)},n.getPseudoRandomBuffer=function(t){for(var e,r=new Buffer(t),n=0;n<=t;n++){0===n-4*Math.floor(n/4)?(e=4294967296*Math.random(),r[n]=255&e):r[n]=255&(e>>>=8)}return r},t.exports=n},function(t,e,r){"use strict";var n=r(0),i=r(4),s=r(2),o=r(13),u=r(8),a=r(5),h=(r(3),r(1)),f=function t(e){if(!(this instanceof t))return new t(e);var r=t._from(e);return this.version=r.version,this.prevHash=r.prevHash,this.merkleRoot=r.merkleRoot,this.time=r.time,this.timestamp=r.time,this.bits=r.bits,this.nonce=r.nonce,r.hash&&h.checkState(this.hash===r.hash,"Argument object hash property does not match block hash."),this};f._from=function(t){var e={};if(s.isBuffer(t))e=f._fromBufferReader(o(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for BlockHeader");e=f._fromObject(t)}return e},f._fromObject=function(t){h.checkArgument(t,"data is required");var e=t.prevHash,r=t.merkleRoot;return n.isString(t.prevHash)&&(e=s.reverse(new Buffer(t.prevHash,"hex"))),n.isString(t.merkleRoot)&&(r=s.reverse(new Buffer(t.merkleRoot,"hex"))),{hash:t.hash,version:t.version,prevHash:e,merkleRoot:r,time:t.time,timestamp:t.time,bits:t.bits,nonce:t.nonce}},f.fromObject=function(t){var e=f._fromObject(t);return new f(e)},f.fromRawBlock=function(t){s.isBuffer(t)||(t=new Buffer(t,"binary"));var e=o(t);e.pos=f.Constants.START_OF_HEADER;var r=f._fromBufferReader(e);return new f(r)},f.fromBuffer=function(t){var e=f._fromBufferReader(o(t));return new f(e)},f.fromString=function(t){var e=new Buffer(t,"hex");return f.fromBuffer(e)},f._fromBufferReader=function(t){var e={};return e.version=t.readInt32LE(),e.prevHash=t.read(32),e.merkleRoot=t.read(32),e.time=t.readUInt32LE(),e.bits=t.readUInt32LE(),e.nonce=t.readUInt32LE(),e},f.fromBufferReader=function(t){var e=f._fromBufferReader(t);return new f(e)},f.prototype.toObject=f.prototype.toJSON=function(){return{hash:this.hash,version:this.version,prevHash:s.reverse(this.prevHash).toString("hex"),merkleRoot:s.reverse(this.merkleRoot).toString("hex"),time:this.time,bits:this.bits,nonce:this.nonce}},f.prototype.toBuffer=function(){return this.toBufferWriter().concat()},f.prototype.toString=function(){return this.toBuffer().toString("hex")},f.prototype.toBufferWriter=function(t){return t||(t=new u),t.writeInt32LE(this.version),t.write(this.prevHash),t.write(this.merkleRoot),t.writeUInt32LE(this.time),t.writeUInt32LE(this.bits),t.writeUInt32LE(this.nonce),t},f.prototype.getTargetDifficulty=function(t){t=t||this.bits;for(var e=new i(16777215&t),r=8*((t>>>24)-3);r-- >0;)e=e.mul(new i(2));return e},f.prototype.getDifficulty=function(){var t=this.getTargetDifficulty(486604799).mul(new i(Math.pow(10,8))),e=this.getTargetDifficulty(),r=t.div(e).toString(10),n=r.length-8;return r=r.slice(0,n)+"."+r.slice(n),parseFloat(r)},f.prototype._getHash=function(){var t=this.toBuffer();return a.x11(t)};var c={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=o(this._getHash()).readReverse().toString("hex")),this._id},set:n.noop};Object.defineProperty(f.prototype,"id",c),Object.defineProperty(f.prototype,"hash",c),f.prototype.validTimestamp=function(){var t=Math.round((new Date).getTime()/1e3);return!(this.time>t+f.Constants.MAX_TIME_OFFSET)},f.prototype.validProofOfWork=function(){var t=new i(this.id,"hex"),e=this.getTargetDifficulty();return!(t.cmp(e)>0)},f.prototype.inspect=function(){return"<BlockHeader "+this.id+">"},f.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new i("10000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=f},function(t,e,r){"use strict";var n=r(4),i=r(17),s=r(7),o=r(10),u=r(26),a=r(5),h=r(2),f=r(0),c=r(1),p=function t(e){if(!(this instanceof t))return new t(e);e&&this.set(e)};p.prototype.set=function(t){return this.hashbuf=t.hashbuf||this.hashbuf,this.endian=t.endian||this.endian,this.privkey=t.privkey||this.privkey,this.pubkey=t.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=t.sig||this.sig,this.k=t.k||this.k,this.verified=t.verified||this.verified,this},p.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},p.prototype.calci=function(){for(var t=0;t<4;t++){var e;this.sig.i=t;try{e=this.toPublicKey()}catch(t){console.error(t);continue}if(e.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},p.fromString=function(t){var e=JSON.parse(t);return new p(e)},p.prototype.randomK=function(){var t,e=i.getN();do{t=n.fromBuffer(u.getRandomBuffer(32))}while(!t.lt(e)||!t.gt(n.Zero));return this.k=t,this},p.prototype.deterministicK=function(t){f.isUndefined(t)&&(t=0);var e=new Buffer(32);e.fill(1);var r=new Buffer(32);r.fill(0);var s=this.privkey.bn.toBuffer({size:32}),o="little"===this.endian?h.reverse(this.hashbuf):this.hashbuf;r=a.sha256hmac(Buffer.concat([e,new Buffer([0]),s,o]),r),e=a.sha256hmac(e,r),r=a.sha256hmac(Buffer.concat([e,new Buffer([1]),s,o]),r),e=a.sha256hmac(e,r),e=a.sha256hmac(e,r);for(var u=n.fromBuffer(e),c=i.getN(),p=0;p<t||!u.lt(c)||!u.gt(n.Zero);p++)r=a.sha256hmac(Buffer.concat([e,new Buffer([0])]),r),e=a.sha256hmac(e,r),e=a.sha256hmac(e,r),u=n.fromBuffer(e);return this.k=u,this},p.prototype.toPublicKey=function(){var t=this.sig.i;c.checkArgument(0===t||1===t||2===t||3===t,new Error("i must be equal to 0, 1, 2, or 3"));var e=n.fromBuffer(this.hashbuf),r=this.sig.r,s=this.sig.s,u=1&t,a=t>>1,h=i.getN(),f=i.getG(),p=a?r.add(h):r,d=i.fromX(u,p);if(!d.mul(h).isInfinity())throw new Error("nR is not a valid curve point");var l=e.neg().mod(h),g=r.invm(h),m=d.mul(s).add(f.mul(l)).mul(g);return o.fromPoint(m,this.sig.compressed)},p.prototype.sigError=function(){if(!h.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var t=this.sig.r,e=this.sig.s;if(!(t.gt(n.Zero)&&t.lt(i.getN())&&e.gt(n.Zero)&&e.lt(i.getN())))return"r and s not in range";var r=n.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),s=i.getN(),o=e.invm(s),u=o.mul(r).mod(s),a=o.mul(t).mod(s),f=i.getG().mulAdd(u,this.pubkey.point,a);return f.isInfinity()?"p is infinity":0!==f.getX().mod(s).cmp(t)&&"Invalid signature"},p.toLowS=function(t){return t.gt(n.fromBuffer(new Buffer("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(t=i.getN().sub(t)),t},p.prototype._findSignature=function(t,e){var r,s,o,u=i.getN(),a=i.getG(),h=0;do{(!this.k||h>0)&&this.deterministicK(h),h++,r=this.k,s=a.mul(r).x.mod(u),o=r.invm(u).mul(e.add(t.mul(s))).mod(u)}while(s.cmp(n.Zero)<=0||o.cmp(n.Zero)<=0);return{s:o=p.toLowS(o),r:s}},p.prototype.sign=function(){var t=this.hashbuf,e=this.privkey,r=e.bn;c.checkState(t&&e&&r,new Error("invalid parameters")),c.checkState(h.isBuffer(t)&&32===t.length,new Error("hashbuf must be a 32 byte buffer"));var i=n.fromBuffer(t,this.endian?{endian:this.endian}:void 0),o=this._findSignature(r,i);return o.compressed=this.pubkey.compressed,this.sig=new s(o),this},p.prototype.signRandomK=function(){return this.randomK(),this.sign()},p.prototype.toString=function(){var t={};return this.hashbuf&&(t.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(t.privkey=this.privkey.toString()),this.pubkey&&(t.pubkey=this.pubkey.toString()),this.sig&&(t.sig=this.sig.toString()),this.k&&(t.k=this.k.toString()),JSON.stringify(t)},p.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},p.sign=function(t,e,r){return p().set({hashbuf:t,endian:r,privkey:e}).sign().sig},p.verify=function(t,e,r,n){return p().set({hashbuf:t,endian:n,sig:e,pubkey:r}).verify().verified},t.exports=p},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(2),o=r(3);function u(t){if(!(this instanceof u))return new u(t);var e;if(n.isNumber(t))e=t;else{if(!n.isString(t))throw new TypeError('Unrecognized num type: "'+typeof t+'" for Opcode');e=u.map[t]}return o.defineImmutable(this,{num:e}),this}for(var a in u.fromBuffer=function(t){return i.checkArgument(s.isBuffer(t)),new u(Number("0x"+t.toString("hex")))},u.fromNumber=function(t){return i.checkArgument(n.isNumber(t)),new u(t)},u.fromString=function(t){i.checkArgument(n.isString(t));var e=u.map[t];if(void 0===e)throw new TypeError("Invalid opcodestr");return new u(e)},u.prototype.toHex=function(){return this.num.toString(16)},u.prototype.toBuffer=function(){return new Buffer(this.toHex(),"hex")},u.prototype.toNumber=function(){return this.num},u.prototype.toString=function(){var t=u.reverseMap[this.num];if(void 0===t)throw new Error("Opcode does not have a string representation");return t},u.smallInt=function(t){return i.checkArgument(n.isNumber(t),"Invalid Argument: n should be number"),i.checkArgument(t>=0&&t<=16,"Invalid Argument: n must be between 0 and 16"),0===t?u("OP_0"):new u(u.map.OP_1+t-1)},u.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},u.reverseMap=[],u.map)u.reverseMap[u.map[a]]=a;n.extend(u,u.map),u.isSmallIntOp=function(t){return t instanceof u&&(t=t.toNumber()),t===u.map.OP_0||t>=u.map.OP_1&&t<=u.map.OP_16},u.prototype.inspect=function(){return"<Opcode: "+this.toString()+", hex: "+this.toHex()+", decimal: "+this.num+">"},t.exports=u},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(9),o=Buffer.compare||r(38),u=r(6),a=r(2),h=r(3),f=r(13),c=r(8),p=r(5),d=r(7),l=r(14),g=r(12),m=r(39),y=r(31),_=y.PublicKeyHash,b=y.PublicKey,v=y.MultiSigScriptHash,S=y.MultiSig,k=r(15),I=r(11),w=r(18),O=r(4);function P(t){if(!(this instanceof P))return new P(t);if(this.inputs=[],this.outputs=[],this._inputAmount=void 0,this._outputAmount=void 0,t){if(t instanceof P)return P.shallowCopy(t);if(h.isHexa(t))this.fromString(t);else if(a.isBuffer(t))this.fromBuffer(t);else{if(!n.isObject(t))throw new u.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(t)}}else this._newTransaction()}P.DUST_AMOUNT=5460,P.FEE_SECURITY_MARGIN=15,P.MAX_MONEY=21e14,P.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,P.NLOCKTIME_MAX_VALUE=4294967295,P.FEE_PER_KB=1e4,P.CHANGE_OUTPUT_MAX_SIZE=62,P.MAXIMUM_EXTRA_SIZE=26,P.shallowCopy=function(t){return new P(t.toBuffer())};var E={configurable:!1,enumerable:!0,get:function(){return new f(this._getHash()).readReverse().toString("hex")}};Object.defineProperty(P.prototype,"hash",E),Object.defineProperty(P.prototype,"id",E);var B={configurable:!1,enumerable:!0,get:function(){return this._getInputAmount()}};Object.defineProperty(P.prototype,"inputAmount",B),B.get=function(){return this._getOutputAmount()},Object.defineProperty(P.prototype,"outputAmount",B),P.prototype._getHash=function(){return p.sha256sha256(this.toBuffer())},P.prototype.serialize=function(t){return!0===t||t&&t.disableAll?this.uncheckedSerialize():this.checkedSerialize(t)},P.prototype.uncheckedSerialize=P.prototype.toString=function(){return this.toBuffer().toString("hex")},P.prototype.checkedSerialize=function(t){var e=this.getSerializationError(t);if(e)throw e.message+=" - For more information please see: https://bitcore.io/api/lib/transaction#serialization-checks",e;return this.uncheckedSerialize()},P.prototype.invalidSatoshis=function(){for(var t=!1,e=0;e<this.outputs.length;e++)this.outputs[e].invalidSatoshis()&&(t=!0);return t},P.prototype.getSerializationError=function(t){if(t=t||{},this.invalidSatoshis())return new u.Transaction.InvalidSatoshis;var e,r=this._getUnspentValue();return r<0?t.disableMoreOutputThanInput||(e=new u.Transaction.InvalidOutputAmountSum):e=this._hasFeeError(t,r),e||this._hasDustOutputs(t)||this._isMissingSignatures(t)},P.prototype._hasFeeError=function(t,e){if(!n.isUndefined(this._fee)&&this._fee!==e)return new u.Transaction.FeeError.Different("Unspent value is "+e+" but specified fee is "+this._fee);if(!t.disableLargeFees){var r=Math.floor(P.FEE_SECURITY_MARGIN*this._estimateFee());if(e>r)return this._missingChange()?new u.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new u.Transaction.FeeError.TooLarge("expected less than "+r+" but got "+e)}if(!t.disableSmallFees){var i=Math.ceil(this._estimateFee()/P.FEE_SECURITY_MARGIN);if(e<i)return new u.Transaction.FeeError.TooSmall("expected more than "+i+" but got "+e)}},P.prototype._missingChange=function(){return!this._changeScript},P.prototype._hasDustOutputs=function(t){var e,r;if(!t.disableDustOutputs)for(e in this.outputs)if((r=this.outputs[e]).satoshis<P.DUST_AMOUNT&&!r.script.isDataOut())return new u.Transaction.DustOutputs},P.prototype._isMissingSignatures=function(t){if(!t.disableIsFullySigned)return this.isFullySigned()?void 0:new u.Transaction.MissingSignatures},P.prototype.inspect=function(){return"<Transaction: "+this.uncheckedSerialize()+">"},P.prototype.toBuffer=function(){var t=new c;return this.toBufferWriter(t).toBuffer()},P.prototype.toBufferWriter=function(t){return t.writeInt32LE(this.version),t.writeVarintNum(this.inputs.length),n.each(this.inputs,function(e){e.toBufferWriter(t)}),t.writeVarintNum(this.outputs.length),n.each(this.outputs,function(e){e.toBufferWriter(t)}),t.writeUInt32LE(this.nLockTime),t},P.prototype.fromBuffer=function(t){var e=new f(t);return this.fromBufferReader(e)},P.prototype.fromBufferReader=function(t){var e,r,n;for(i.checkArgument(!t.finished(),"No transaction data received"),this.version=t.readInt32LE(),r=t.readVarintNum(),e=0;e<r;e++){var s=y.fromBufferReader(t);this.inputs.push(s)}for(n=t.readVarintNum(),e=0;e<n;e++)this.outputs.push(k.fromBufferReader(t));return this.nLockTime=t.readUInt32LE(),this},P.prototype.toObject=P.prototype.toJSON=function(){var t=[];this.inputs.forEach(function(e){t.push(e.toObject())});var e=[];this.outputs.forEach(function(t){e.push(t.toObject())});var r={hash:this.hash,version:this.version,inputs:t,outputs:e,nLockTime:this.nLockTime};return this._changeScript&&(r.changeScript=this._changeScript.toString()),n.isUndefined(this._changeIndex)||(r.changeIndex=this._changeIndex),n.isUndefined(this._fee)||(r.fee=this._fee),r},P.prototype.fromObject=function(t){i.checkArgument(n.isObject(t)||t instanceof P);var e,r=this;return e=t instanceof P?t.toObject():t,n.each(e.inputs,function(t){if(t.output&&t.output.script){var e,n=new I(t.output.script);if(n.isPublicKeyHashOut())e=new y.PublicKeyHash(t);else if(n.isScriptHashOut()&&t.publicKeys&&t.threshold)e=new y.MultiSigScriptHash(t,t.publicKeys,t.threshold,t.signatures);else{if(!n.isPublicKeyOut())throw new u.Transaction.Input.UnsupportedScript(t.output.script);e=new y.PublicKey(t)}r.addInput(e)}else r.uncheckedAddInput(new y(t))}),n.each(e.outputs,function(t){r.addOutput(new k(t))}),e.changeIndex&&(this._changeIndex=e.changeIndex),e.changeScript&&(this._changeScript=new I(e.changeScript)),e.fee&&(this._fee=e.fee),this.nLockTime=e.nLockTime,this.version=e.version,this._checkConsistency(t),this},P.prototype._checkConsistency=function(t){n.isUndefined(this._changeIndex)||(i.checkState(this._changeScript),i.checkState(this.outputs[this._changeIndex]),i.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString())),t&&t.hash&&i.checkState(t.hash===this.hash,"Hash in object does not match transaction hash")},P.prototype.lockUntilDate=function(t){if(i.checkArgument(t),n.isNumber(t)&&t<P.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new u.Transaction.LockTimeTooEarly;n.isDate(t)&&(t=t.getTime()/1e3);for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===y.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=y.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},P.prototype.lockUntilBlockHeight=function(t){if(i.checkArgument(n.isNumber(t)),t>=P.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new u.Transaction.BlockHeightTooHigh;if(t<0)throw new u.Transaction.NLockTimeOutOfRange;for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===y.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=y.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},P.prototype.getLockTime=function(){return this.nLockTime?this.nLockTime<P.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null},P.prototype.fromString=function(t){this.fromBuffer(new s.Buffer(t,"hex"))},P.prototype._newTransaction=function(){this.version=1,this.nLockTime=0},P.prototype.from=function(t,e,r){if(n.isArray(t)){var i=this;return n.each(t,function(t){i.from(t,e,r)}),this}return n.some(this.inputs,function(e){return e.prevTxId.toString("hex")===t.txId&&e.outputIndex===t.outputIndex})?this:(e&&r?this._fromMultisigUtxo(t,e,r):this._fromNonP2SH(t),this)},P.prototype._fromNonP2SH=function(t){var e;e=(t=new m(t)).script.isPublicKeyHashOut()?_:t.script.isPublicKeyOut()?b:y,this.addInput(new e({output:new k({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:I.empty()}))},P.prototype._fromMultisigUtxo=function(t,e,r){var n;if(i.checkArgument(r<=e.length,"Number of required signatures must be greater than the number of public keys"),(t=new m(t)).script.isMultisigOut())n=S;else{if(!t.script.isScriptHashOut())throw new Error("@TODO");n=v}this.addInput(new n({output:new k({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:I.empty()},e,r))},P.prototype.addInput=function(t,e,r){if(i.checkArgumentType(t,y,"input"),!t.output&&(n.isUndefined(e)||n.isUndefined(r)))throw new u.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return t.output||!e||n.isUndefined(r)||(e=e instanceof I?e:new I(e),i.checkArgumentType(r,"number","satoshis"),t.output=new k({script:e,satoshis:r})),this.uncheckedAddInput(t)},P.prototype.uncheckedAddInput=function(t){return i.checkArgumentType(t,y,"input"),this.inputs.push(t),this._inputAmount=void 0,this._updateChangeOutput(),this},P.prototype.hasAllUtxoInfo=function(){return n.some(this.inputs.map(function(t){return!!t.output}))},P.prototype.fee=function(t){return i.checkArgument(n.isNumber(t),"amount must be a number"),this._fee=t,this._updateChangeOutput(),this},P.prototype.feePerKb=function(t){return i.checkArgument(n.isNumber(t),"amount must be a number"),this._feePerKb=t,this._updateChangeOutput(),this},P.prototype.change=function(t){return i.checkArgument(t,"address is required"),this._changeScript=I.fromAddress(t),this._updateChangeOutput(),this},P.prototype.getChangeOutput=function(){return n.isUndefined(this._changeIndex)?null:this.outputs[this._changeIndex]},P.prototype.to=function(t,e){if(n.isArray(t)){var r=this;return n.each(t,function(t){r.to(t.address,t.satoshis)}),this}return i.checkArgument(h.isNaturalNumber(e),"Amount is expected to be a positive integer"),this.addOutput(new k({script:I(new g(t)),satoshis:e})),this},P.prototype.addData=function(t){return this.addOutput(new k({script:I.buildDataOut(t),satoshis:0})),this},P.prototype.addOutput=function(t){return i.checkArgumentType(t,k,"output"),this._addOutput(t),this._updateChangeOutput(),this},P.prototype.clearOutputs=function(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this},P.prototype._addOutput=function(t){this.outputs.push(t),this._outputAmount=void 0},P.prototype._getOutputAmount=function(){if(n.isUndefined(this._outputAmount)){var t=this;this._outputAmount=0,n.each(this.outputs,function(e){t._outputAmount+=e.satoshis})}return this._outputAmount},P.prototype._getInputAmount=function(){if(n.isUndefined(this._inputAmount)){var t=this;this._inputAmount=0,n.each(this.inputs,function(e){if(n.isUndefined(e.output))throw new u.Transaction.Input.MissingPreviousOutput;t._inputAmount+=e.output.satoshis})}return this._inputAmount},P.prototype._updateChangeOutput=function(){if(this._changeScript){this._clearSignatures(),n.isUndefined(this._changeIndex)||this._removeOutput(this._changeIndex);var t=this._getUnspentValue()-this.getFee();t>0?(this._changeIndex=this.outputs.length,this._addOutput(new k({script:this._changeScript,satoshis:t}))):this._changeIndex=void 0}},P.prototype.getFee=function(){return this.isCoinbase()?0:n.isUndefined(this._fee)?this._changeScript?this._estimateFee():this._getUnspentValue():this._fee},P.prototype._estimateFee=function(){var t=this._estimateSize(),e=this._getUnspentValue();return P._estimateFee(t,e,this._feePerKb)},P.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount()},P.prototype._clearSignatures=function(){n.each(this.inputs,function(t){t.clearSignatures()})},P._estimateFee=function(t,e,r){return e>Math.ceil(t/1e3)*(r||P.FEE_PER_KB)&&(t+=P.CHANGE_OUTPUT_MAX_SIZE),Math.ceil(t/1e3)*(r||P.FEE_PER_KB)},P.prototype._estimateSize=function(){var t=P.MAXIMUM_EXTRA_SIZE;return n.each(this.inputs,function(e){t+=e._estimateSize()}),n.each(this.outputs,function(e){t+=e.script.toBuffer().length+9}),t},P.prototype._removeOutput=function(t){var e=this.outputs[t];this.outputs=n.without(this.outputs,e),this._outputAmount=void 0},P.prototype.removeOutput=function(t){this._removeOutput(t),this._updateChangeOutput()},P.prototype.sort=function(){return this.sortInputs(function(t){var e=Array.prototype.concat.apply([],t);return e.sort(function(t,e){return o(t.prevTxId,e.prevTxId)||t.outputIndex-e.outputIndex}),e}),this.sortOutputs(function(t){var e=Array.prototype.concat.apply([],t);return e.sort(function(t,e){return t.satoshis-e.satoshis||o(t.script.toBuffer(),e.script.toBuffer())}),e}),this},P.prototype.shuffleOutputs=function(){return this.sortOutputs(n.shuffle)},P.prototype.sortOutputs=function(t){var e=t(this.outputs);return this._newOutputOrder(e)},P.prototype.sortInputs=function(t){return this.inputs=t(this.inputs),this._clearSignatures(),this},P.prototype._newOutputOrder=function(t){if(this.outputs.length!==t.length||0!==n.difference(this.outputs,t).length)throw new u.Transaction.InvalidSorting;if(!n.isUndefined(this._changeIndex)){var e=this.outputs[this._changeIndex];this._changeIndex=n.findIndex(t,e)}return this.outputs=t,this},P.prototype.removeInput=function(t,e){var r;if((r=!e&&n.isNumber(t)?t:n.findIndex(this.inputs,function(r){return r.prevTxId.toString("hex")===t&&r.outputIndex===e}))<0||r>=this.inputs.length)throw new u.Transaction.InvalidIndex(r,this.inputs.length);var i=this.inputs[r];this.inputs=n.without(this.inputs,i),this._inputAmount=void 0,this._updateChangeOutput()},P.prototype.sign=function(t,e){i.checkState(this.hasAllUtxoInfo());var r=this;return n.isArray(t)?(n.each(t,function(t){r.sign(t,e)}),this):(n.each(this.getSignatures(t,e),function(t){r.applySignature(t)}),this)},P.prototype.getSignatures=function(t,e){t=new w(t),e=e||d.SIGHASH_ALL;var r=this,i=[],s=p.sha256ripemd160(t.publicKey.toBuffer());return n.each(this.inputs,function(o,u){n.each(o.getSignatures(r,t,u,e,s),function(t){i.push(t)})}),i},P.prototype.applySignature=function(t){return this.inputs[t.inputIndex].addSignature(this,t),this},P.prototype.isFullySigned=function(){return n.each(this.inputs,function(t){if(t.isFullySigned===y.prototype.isFullySigned)throw new u.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")}),n.some(n.map(this.inputs,function(t){return t.isFullySigned()}))},P.prototype.isValidSignature=function(t){if(this.inputs[t.inputIndex].isValidSignature===y.prototype.isValidSignature)throw new u.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[t.inputIndex].isValidSignature(this,t)},P.prototype.verifySignature=function(t,e,r,n){return l.verify(this,t,e,r,n)},P.prototype.verify=function(){if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";for(var t=new O(0),e=0;e<this.outputs.length;e++){var r=this.outputs[e];if(r.invalidSatoshis())return"transaction txout "+e+" satoshis is invalid";if(r._satoshisBN.gt(new O(P.MAX_MONEY,10)))return"transaction txout "+e+" greater than MAX_MONEY";if((t=t.add(r._satoshisBN)).gt(new O(P.MAX_MONEY)))return"transaction txout "+e+" total output greater than MAX_MONEY"}if(this.toBuffer().length>1e6)return"transaction over the maximum block size";var i={};for(e=0;e<this.inputs.length;e++){var s=this.inputs[e],o=s.prevTxId+":"+s.outputIndex;if(!n.isUndefined(i[o]))return"transaction input "+e+" duplicate input";i[o]=!0}if(this.isCoinbase()){var u=this.inputs[0]._scriptBuffer;if(u.length<2||u.length>100)return"coinbase transaction script size invalid"}else for(e=0;e<this.inputs.length;e++)if(this.inputs[e].isNull())return"transaction input "+e+" has null input";return!0},P.prototype.isCoinbase=function(){return 1===this.inputs.length&&this.inputs[0].isNull()},P.prototype.isRBF=function(){for(var t=0;t<this.inputs.length;t++){if(this.inputs[t].sequenceNumber<y.MAXINT-1)return!0}return!1},P.prototype.enableRBF=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t];e.sequenceNumber>=y.MAXINT-1&&(e.sequenceNumber=y.DEFAULT_RBF_SEQNUMBER)}return this},t.exports=P},function(t,e,r){t.exports=r(20),t.exports.PublicKey=r(51),t.exports.PublicKeyHash=r(52),t.exports.MultiSig=r(53),t.exports.MultiSigScriptHash=r(54)},function(t,e,r){"use strict";var n=r(0),i=r(6),s=r(1),o={BTC:[1e8,8],mBTC:[1e5,5],uBTC:[100,2],bits:[100,2],satoshis:[1,0]};function u(t,e){if(!(this instanceof u))return new u(t,e);if(n.isNumber(e)){if(e<=0)throw new i.Unit.InvalidRate(e);t/=e,e=u.BTC}this._value=this._from(t,e);var r=this;Object.keys(o).forEach(function(t){Object.defineProperty(r,t,{get:function(){return r.to(t)},enumerable:!0})})}Object.keys(o).forEach(function(t){u[t]=t}),u.fromObject=function(t){return s.checkArgument(n.isObject(t),"Argument is expected to be an object"),new u(t.amount,t.code)},u.fromBTC=function(t){return new u(t,u.BTC)},u.fromMillis=u.fromMilis=function(t){return new u(t,u.mBTC)},u.fromMicros=u.fromBits=function(t){return new u(t,u.bits)},u.fromSatoshis=function(t){return new u(t,u.satoshis)},u.fromFiat=function(t,e){return new u(t,e)},u.prototype._from=function(t,e){if(!o[e])throw new i.Unit.UnknownCode(e);return parseInt((t*o[e][0]).toFixed())},u.prototype.to=function(t){if(n.isNumber(t)){if(t<=0)throw new i.Unit.InvalidRate(t);return parseFloat((this.BTC*t).toFixed(2))}if(!o[t])throw new i.Unit.UnknownCode(t);var e=this._value/o[t][0];return parseFloat(e.toFixed(o[t][1]))},u.prototype.toBTC=function(){return this.to(u.BTC)},u.prototype.toMillis=u.prototype.toMilis=function(){return this.to(u.mBTC)},u.prototype.toMicros=u.prototype.toBits=function(){return this.to(u.bits)},u.prototype.toSatoshis=function(){return this.to(u.satoshis)},u.prototype.atRate=function(t){return this.to(t)},u.prototype.toString=function(){return this.satoshis+" satoshis"},u.prototype.toObject=u.prototype.toJSON=function(){return{amount:this.BTC,code:u.BTC}},u.prototype.inspect=function(){return"<Unit: "+this.toString()+">"},t.exports=u},function(t,e){t.exports=require("bn.js")},function(t,e){t.exports=require("elliptic")},function(t,e){t.exports=require("crypto")},function(t,e){t.exports=require("bs58")},function(t,e,r){"use strict";var n=r(12),i=r(13),s=r(8),o=r(5),u=r(29),a=r(10),h=r(7),f=r(16),c=r(1),p=r(0),d=r(6),l=r(9),g=r(2),m=r(3),y=function t(e){return this instanceof t?(this.chunks=[],g.isBuffer(e)?t.fromBuffer(e):e instanceof n?t.fromAddress(e):e instanceof t?t.fromBuffer(e.toBuffer()):"string"==typeof e?t.fromString(e):void(void 0!==e&&this.set(e))):new t(e)};y.prototype.set=function(t){return this.chunks=t.chunks||this.chunks,this},y.fromBuffer=function(t){var e=new y;e.chunks=[];for(var r=new i(t);!r.finished();)try{var n,s,o=r.readUInt8();o>0&&o<u.OP_PUSHDATA1?(n=o,e.chunks.push({buf:r.read(n),len:n,opcodenum:o})):o===u.OP_PUSHDATA1?(n=r.readUInt8(),s=r.read(n),e.chunks.push({buf:s,len:n,opcodenum:o})):o===u.OP_PUSHDATA2?(n=r.readUInt16LE(),s=r.read(n),e.chunks.push({buf:s,len:n,opcodenum:o})):o===u.OP_PUSHDATA4?(n=r.readUInt32LE(),s=r.read(n),e.chunks.push({buf:s,len:n,opcodenum:o})):e.chunks.push({opcodenum:o})}catch(e){if(e instanceof RangeError)throw new d.Script.InvalidBuffer(t.toString("hex"));throw e}return e},y.prototype.toBuffer=function(){for(var t=new s,e=0;e<this.chunks.length;e++){var r=this.chunks[e],n=r.opcodenum;t.writeUInt8(r.opcodenum),r.buf&&(n<u.OP_PUSHDATA1?t.write(r.buf):n===u.OP_PUSHDATA1?(t.writeUInt8(r.len),t.write(r.buf)):n===u.OP_PUSHDATA2?(t.writeUInt16LE(r.len),t.write(r.buf)):n===u.OP_PUSHDATA4&&(t.writeUInt32LE(r.len),t.write(r.buf)))}return t.concat()},y.fromASM=function(t){var e=new y;e.chunks=[];for(var r=t.split(" "),n=0;n<r.length;){var i=r[n],s=u(i).toNumber();if(p.isUndefined(s)){var o=new Buffer(r[n],"hex");e.chunks.push({buf:o,len:o.length,opcodenum:o.length}),n+=1}else s===u.OP_PUSHDATA1||s===u.OP_PUSHDATA2||s===u.OP_PUSHDATA4?(e.chunks.push({buf:new Buffer(r[n+2],"hex"),len:parseInt(r[n+1]),opcodenum:s}),n+=3):(e.chunks.push({opcodenum:s}),n+=1)}return e},y.fromHex=function(t){return new y(new l.Buffer(t,"hex"))},y.fromString=function(t){if(m.isHexa(t)||0===t.length)return new y(new l.Buffer(t,"hex"));var e=new y;e.chunks=[];for(var r=t.split(" "),n=0;n<r.length;){var i=r[n],s=u(i).toNumber();if(p.isUndefined(s)){if(!((s=parseInt(i))>0&&s<u.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(t));e.chunks.push({buf:new Buffer(r[n+1].slice(2),"hex"),len:s,opcodenum:s}),n+=2}else if(s===u.OP_PUSHDATA1||s===u.OP_PUSHDATA2||s===u.OP_PUSHDATA4){if("0x"!==r[n+2].slice(0,2))throw new Error("Pushdata data must start with 0x");e.chunks.push({buf:new Buffer(r[n+2].slice(2),"hex"),len:parseInt(r[n+1]),opcodenum:s}),n+=3}else e.chunks.push({opcodenum:s}),n+=1}return e},y.prototype._chunkToString=function(t,e){var r=t.opcodenum,n="asm"===e,i="";if(t.buf)r!==u.OP_PUSHDATA1&&r!==u.OP_PUSHDATA2&&r!==u.OP_PUSHDATA4||(i=i+" "+u(r).toString()),t.len>0&&(i=n?i+" "+t.buf.toString("hex"):i+" "+t.len+" 0x"+t.buf.toString("hex"));else if(void 0!==u.reverseMap[r])i=i+" "+u(r).toString();else{var s=r.toString(16);s.length%2!=0&&(s="0"+s),i=n?i+" "+s:i+" 0x"+s}return i},y.prototype.toASM=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r,"asm")}return t.substr(1)},y.prototype.toString=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r)}return t.substr(1)},y.prototype.toHex=function(){return this.toBuffer().toString("hex")},y.prototype.inspect=function(){return"<Script: "+this.toString()+">"},y.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==u.OP_DUP||this.chunks[1].opcodenum!==u.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==u.OP_EQUALVERIFY||this.chunks[4].opcodenum!==u.OP_CHECKSIG)},y.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var t=this.chunks[0].buf,e=this.chunks[1].buf;if(t&&t.length&&48===t[0]&&e&&e.length){var r=e[0];if((4===r||6===r||7===r)&&65===e.length)return!0;if((3===r||2===r)&&33===e.length)return!0}}return!1},y.prototype.getPublicKey=function(){return c.checkState(this.isPublicKeyOut(),"Can't retrieve PublicKey from a non-PK output"),this.chunks[0].buf},y.prototype.getPublicKeyHash=function(){return c.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},y.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===u.OP_CHECKSIG){var t=this.chunks[0].buf,e=t[0],r=!1;if((4!==e&&6!==e&&7!==e||65!==t.length)&&(3!==e&&2!==e||33!==t.length)||(r=!0),r)return a.isValid(t)}return!1},y.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var t=this.chunks[0].buf;if(t&&t.length&&48===t[0])return!0}return!1},y.prototype.isScriptHashOut=function(){var t=this.toBuffer();return 23===t.length&&t[0]===u.OP_HASH160&&20===t[1]&&t[t.length-1]===u.OP_EQUAL},y.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var t,e=this.chunks[this.chunks.length-1].buf;if(!e)return!1;try{t=y.fromBuffer(e)}catch(t){if(t instanceof d.Script.InvalidBuffer)return!1;throw t}return t.classify()!==y.types.UNKNOWN},y.prototype.isMultisigOut=function(){return this.chunks.length>3&&u.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(function(t){return t.buf&&g.isBuffer(t.buf)})&&u.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===u.OP_CHECKMULTISIG},y.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every(function(t){return t.buf&&g.isBuffer(t.buf)&&h.isTxDER(t.buf)})},y.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===u.OP_RETURN&&(1===this.chunks.length||2===this.chunks.length&&this.chunks[1].buf&&this.chunks[1].buf.length<=y.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len)},y.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return p.isUndefined(this.chunks[1])?new Buffer(0):new Buffer(this.chunks[1].buf);if(this.isPublicKeyHashOut())return new Buffer(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},y.prototype.isPushOnly=function(){return p.every(this.chunks,function(t){return t.opcodenum<=u.OP_16})},(y.types={}).UNKNOWN="Unknown",y.types.PUBKEY_OUT="Pay to public key",y.types.PUBKEY_IN="Spend from public key",y.types.PUBKEYHASH_OUT="Pay to public key hash",y.types.PUBKEYHASH_IN="Spend from public key hash",y.types.SCRIPTHASH_OUT="Pay to script hash",y.types.SCRIPTHASH_IN="Spend from script hash",y.types.MULTISIG_OUT="Pay to multisig",y.types.MULTISIG_IN="Spend from multisig",y.types.DATA_OUT="Data push",y.OP_RETURN_STANDARD_SIZE=80,y.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var t=this.classifyOutput();return t!=y.types.UNKNOWN?t:this.classifyInput()},(y.outputIdentifiers={}).PUBKEY_OUT=y.prototype.isPublicKeyOut,y.outputIdentifiers.PUBKEYHASH_OUT=y.prototype.isPublicKeyHashOut,y.outputIdentifiers.MULTISIG_OUT=y.prototype.isMultisigOut,y.outputIdentifiers.SCRIPTHASH_OUT=y.prototype.isScriptHashOut,y.outputIdentifiers.DATA_OUT=y.prototype.isDataOut,y.prototype.classifyOutput=function(){for(var t in y.outputIdentifiers)if(y.outputIdentifiers[t].bind(this)())return y.types[t];return y.types.UNKNOWN},(y.inputIdentifiers={}).PUBKEY_IN=y.prototype.isPublicKeyIn,y.inputIdentifiers.PUBKEYHASH_IN=y.prototype.isPublicKeyHashIn,y.inputIdentifiers.MULTISIG_IN=y.prototype.isMultisigIn,y.inputIdentifiers.SCRIPTHASH_IN=y.prototype.isScriptHashIn,y.prototype.classifyInput=function(){for(var t in y.inputIdentifiers)if(y.inputIdentifiers[t].bind(this)())return y.types[t];return y.types.UNKNOWN},y.prototype.isStandard=function(){return this.classify()!==y.types.UNKNOWN},y.prototype.prepend=function(t){return this._addByType(t,!0),this},y.prototype.equals=function(t){if(c.checkState(t instanceof y,"Must provide another script"),this.chunks.length!==t.chunks.length)return!1;var e;for(e=0;e<this.chunks.length;e++){if(g.isBuffer(this.chunks[e].buf)&&!g.isBuffer(t.chunks[e].buf))return!1;if(g.isBuffer(this.chunks[e].buf)&&!g.equals(this.chunks[e].buf,t.chunks[e].buf))return!1;if(this.chunks[e].opcodenum!==t.chunks[e].opcodenum)return!1}return!0},y.prototype.add=function(t){return this._addByType(t,!1),this},y.prototype._addByType=function(t,e){if("string"==typeof t)this._addOpcode(t,e);else if("number"==typeof t)this._addOpcode(t,e);else if(t instanceof u)this._addOpcode(t,e);else if(g.isBuffer(t))this._addBuffer(t,e);else if(t instanceof y)this.chunks=this.chunks.concat(t.chunks);else{if("object"!=typeof t)throw new Error("Invalid script chunk");this._insertAtPosition(t,e)}},y.prototype._insertAtPosition=function(t,e){e?this.chunks.unshift(t):this.chunks.push(t)},y.prototype._addOpcode=function(t,e){var r;return r="number"==typeof t?t:t instanceof u?t.toNumber():u(t).toNumber(),this._insertAtPosition({opcodenum:r},e),this},y.prototype._addBuffer=function(t,e){var r,n=t.length;if(n>=0&&n<u.OP_PUSHDATA1)r=n;else if(n<Math.pow(2,8))r=u.OP_PUSHDATA1;else if(n<Math.pow(2,16))r=u.OP_PUSHDATA2;else{if(!(n<Math.pow(2,32)))throw new Error("You can't push that much data");r=u.OP_PUSHDATA4}return this._insertAtPosition({buf:t,len:n,opcodenum:r},e),this},y.prototype.removeCodeseparators=function(){for(var t=[],e=0;e<this.chunks.length;e++)this.chunks[e].opcodenum!==u.OP_CODESEPARATOR&&t.push(this.chunks[e]);return this.chunks=t,this},y.buildMultisigOut=function(t,e,r){c.checkArgument(e<=t.length,"Number of required signatures must be less than or equal to the number of public keys"),r=r||{};var n=new y;n.add(u.smallInt(e));var i=t=p.map(t,a);r.noSorting||(i=p.sortBy(t,function(t){return t.toString("hex")}));for(var s=0;s<i.length;s++){var o=i[s];n.add(o.toBuffer())}return n.add(u.smallInt(t.length)),n.add(u.OP_CHECKMULTISIG),n},y.buildMultisigIn=function(t,e,r,n){c.checkArgument(p.isArray(t)),c.checkArgument(p.isNumber(e)),c.checkArgument(p.isArray(r)),n=n||{};var i=new y;return i.add(u.OP_0),p.each(r,function(t){c.checkArgument(g.isBuffer(t),"Signatures must be an array of Buffers"),i.add(t)}),i},y.buildP2SHMultisigIn=function(t,e,r,n){c.checkArgument(p.isArray(t)),c.checkArgument(p.isNumber(e)),c.checkArgument(p.isArray(r)),n=n||{};var i=new y;return i.add(u.OP_0),p.each(r,function(t){c.checkArgument(g.isBuffer(t),"Signatures must be an array of Buffers"),i.add(t)}),i.add((n.cachedMultisig||y.buildMultisigOut(t,e,n)).toBuffer()),i},y.buildPublicKeyHashOut=function(t){c.checkArgument(!p.isUndefined(t)),c.checkArgument(t instanceof a||t instanceof n||p.isString(t)),t instanceof a?t=t.toAddress():p.isString(t)&&(t=new n(t));var e=new y;return e.add(u.OP_DUP).add(u.OP_HASH160).add(t.hashBuffer).add(u.OP_EQUALVERIFY).add(u.OP_CHECKSIG),e._network=t.network,e},y.buildPublicKeyOut=function(t){c.checkArgument(t instanceof a);var e=new y;return e.add(t.toBuffer()).add(u.OP_CHECKSIG),e},y.buildDataOut=function(t,e){c.checkArgument(p.isUndefined(t)||p.isString(t)||g.isBuffer(t)),p.isString(t)&&(t=new Buffer(t,e));var r=new y;return r.add(u.OP_RETURN),p.isUndefined(t)||r.add(t),r},y.buildScriptHashOut=function(t){c.checkArgument(t instanceof y||t instanceof n&&t.isPayToScriptHash());var e=new y;return e.add(u.OP_HASH160).add(t instanceof n?t.hashBuffer:o.sha256ripemd160(t.toBuffer())).add(u.OP_EQUAL),e._network=t._network||t.network,e},y.buildPublicKeyIn=function(t,e){c.checkArgument(t instanceof h||g.isBuffer(t)),c.checkArgument(p.isUndefined(e)||p.isNumber(e)),t instanceof h&&(t=t.toBuffer());var r=new y;return r.add(g.concat([t,g.integerAsSingleByteBuffer(e||h.SIGHASH_ALL)])),r},y.buildPublicKeyHashIn=function(t,e,r){return c.checkArgument(e instanceof h||g.isBuffer(e)),c.checkArgument(p.isUndefined(r)||p.isNumber(r)),e instanceof h&&(e=e.toBuffer()),(new y).add(g.concat([e,g.integerAsSingleByteBuffer(r||h.SIGHASH_ALL)])).add(new a(t).toBuffer())},y.empty=function(){return new y},y.prototype.toScriptHashOut=function(){return y.buildScriptHashOut(this)},y.fromAddress=function(t){if((t=n(t)).isPayToScriptHash())return y.buildScriptHashOut(t);if(t.isPayToPublicKeyHash())return y.buildPublicKeyHashOut(t);throw new d.Script.UnrecognizedAddress(t)},y.prototype.getAddressInfo=function(t){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var e=this._getOutputAddressInfo();return e||this._getInputAddressInfo()},y.prototype._getOutputAddressInfo=function(){var t={};if(this.isScriptHashOut())t.hashBuffer=this.getData(),t.type=n.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;t.hashBuffer=this.getData(),t.type=n.PayToPublicKeyHash}return t},y.prototype._getInputAddressInfo=function(){var t={};if(this.isPublicKeyHashIn())t.hashBuffer=o.sha256ripemd160(this.chunks[1].buf),t.type=n.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;t.hashBuffer=o.sha256ripemd160(this.chunks[this.chunks.length-1].buf),t.type=n.PayToScriptHash}return t},y.prototype.toAddress=function(t){var e=this.getAddressInfo();return!!e&&(e.network=f.get(t)||this._network||f.defaultNetwork,new n(e))},y.prototype.findAndDelete=function(t){for(var e=t.toBuffer().toString("hex"),r=0;r<this.chunks.length;r++){e===y({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},y.prototype.checkMinimalPush=function(t){var e=this.chunks[t],r=e.buf,n=e.opcodenum;return!r||(0===r.length?n===u.OP_0:1===r.length&&r[0]>=1&&r[0]<=16?n===u.OP_1+(r[0]-1):1===r.length&&129===r[0]?n===u.OP_1NEGATE:r.length<=75?n===r.length:r.length<=255?n===u.OP_PUSHDATA1:!(r.length<=65535)||n===u.OP_PUSHDATA2)},y.prototype._decodeOP_N=function(t){if(t===u.OP_0)return 0;if(t>=u.OP_1&&t<=u.OP_16)return t-(u.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(t))},y.prototype.getSignatureOperationsCount=function(t){t=!!p.isUndefined(t)||t;var e=this,r=0,n=u.OP_INVALIDOPCODE;return p.each(e.chunks,function(i){var s=i.opcodenum;s==u.OP_CHECKSIG||s==u.OP_CHECKSIGVERIFY?r++:s!=u.OP_CHECKMULTISIG&&s!=u.OP_CHECKMULTISIGVERIFY||(t&&n>=u.OP_1&&n<=u.OP_16?r+=e._decodeOP_N(n):r+=20),n=s}),r},t.exports=y},function(t,e){t.exports=require("buffer-compare")},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(3),o=r(11),u=r(12),a=r(32);function h(t){if(!(this instanceof h))return new h(t);i.checkArgument(n.isObject(t),"Must provide an object from where to extract data");var e=t.address?new u(t.address):void 0,r=t.txid?t.txid:t.txId;if(!r||!s.isHexaString(r)||r.length>64)throw new Error("Invalid TXID in object",t);var f=n.isUndefined(t.vout)?t.outputIndex:t.vout;if(!n.isNumber(f))throw new Error("Invalid outputIndex, received "+f);i.checkArgument(!n.isUndefined(t.scriptPubKey)||!n.isUndefined(t.script),"Must provide the scriptPubKey for that output!");var c=new o(t.scriptPubKey||t.script);i.checkArgument(!n.isUndefined(t.amount)||!n.isUndefined(t.satoshis),"Must provide an amount for the output");var p=n.isUndefined(t.amount)?t.satoshis:new a.fromBTC(t.amount).toSatoshis();i.checkArgument(n.isNumber(p),"Amount must be a number"),s.defineImmutable(this,{address:e,txId:r,outputIndex:f,script:c,satoshis:p})}h.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},h.prototype.toString=function(){return this.txId+":"+this.outputIndex},h.fromObject=function(t){return new h(t)},h.prototype.toObject=h.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:a.fromSatoshis(this.satoshis).toBTC()}},t.exports=h},function(t,e,r){"use strict";var n=r(0),i=r(27),s=r(2),o=r(13),u=r(8),a=r(5),h=(r(3),r(25)),f=r(1);function c(t){if(!(this instanceof c))return new c(t);var e={};if(s.isBuffer(t))e=c._fromBufferReader(o(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for MerkleBlock");e={header:t.header instanceof i?t.header:i.fromObject(t.header),numTransactions:t.numTransactions,hashes:t.hashes,flags:t.flags}}return n.extend(this,e),this._flagBitsUsed=0,this._hashesUsed=0,this}c.fromBuffer=function(t){return c.fromBufferReader(o(t))},c.fromBufferReader=function(t){return new c(c._fromBufferReader(t))},c.prototype.toBuffer=function(){return this.toBufferWriter().concat()},c.prototype.toBufferWriter=function(t){t||(t=new u),t.write(this.header.toBuffer()),t.writeUInt32LE(this.numTransactions),t.writeVarintNum(this.hashes.length);for(var e=0;e<this.hashes.length;e++)t.write(new Buffer(this.hashes[e],"hex"));for(t.writeVarintNum(this.flags.length),e=0;e<this.flags.length;e++)t.writeUInt8(this.flags[e]);return t},c.prototype.toObject=c.prototype.toJSON=function(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},c.prototype.validMerkleTree=function(){if(f.checkState(n.isArray(this.flags),"MerkleBlock flags is not an array"),f.checkState(n.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e);return e.hashesUsed===this.hashes.length&&s.equals(r,this.header.merkleRoot)},c.prototype._traverseMerkleTree=function(t,e,r){if((r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0,r.flagBitsUsed>8*this.flags.length)return null;var n=this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed++)&1;if(0!==t&&n){var i=this._traverseMerkleTree(t-1,2*e,r),s=i;return 2*e+1<this._calcTreeWidth(t-1)&&(s=this._traverseMerkleTree(t-1,2*e+1,r)),a.sha256sha256(new Buffer.concat([i,s]))}if(r.hashesUsed>=this.hashes.length)return null;var o=this.hashes[r.hashesUsed++];return 0===t&&n&&r.txs.push(o),new Buffer(o,"hex")},c.prototype._calcTreeWidth=function(t){return this.numTransactions+(1<<t)-1>>t},c.prototype._calcTreeHeight=function(){for(var t=0;this._calcTreeWidth(t)>1;)t++;return t},c.prototype.hasTransaction=function(t){f.checkArgument(!n.isUndefined(t),"tx cannot be undefined"),f.checkArgument(t instanceof h||"string"==typeof t,'Invalid tx given, tx must be a "string" or "Transaction"');var e=t;t instanceof h&&(e=s.reverse(new Buffer(t.id,"hex")).toString("hex"));var r=[],i=this._calcTreeHeight();return this._traverseMerkleTree(i,0,{txs:r}),-1!==r.indexOf(e)},c._fromBufferReader=function(t){f.checkState(!t.finished(),"No merkleblock data received");var e={};e.header=i.fromBufferReader(t),e.numTransactions=t.readUInt32LE();var r=t.readVarintNum();e.hashes=[];for(var n=0;n<r;n++)e.hashes.push(t.read(32).toString("hex"));var s=t.readVarintNum();for(e.flags=[],n=0;n<s;n++)e.flags.push(t.readUInt8());return e},c.fromObject=function(t){return new c(t)},t.exports=c},function(t,e,r){"use strict";var n=r(23),i=r(9),s=r(0),o=r(1),u=r(4),a=r(24),h=r(19),f=r(5),c=r(16),p=r(17),d=r(18),l=r(26),g=r(6),m=g.HDPrivateKey,y=r(2),_=r(3);function b(t){if(t instanceof b)return t;if(!(this instanceof b))return new b(t);if(!t)return this._generateRandomly();if(c.get(t))return this._generateRandomly(t);if(s.isString(t)||y.isBuffer(t))if(b.isValidSerialized(t))this._buildFromSerialized(t);else if(_.isValidJSON(t))this._buildFromJSON(t);else{if(!y.isBuffer(t)||!b.isValidSerialized(t.toString()))throw b.getSerializedError(t);this._buildFromSerialized(t.toString())}else{if(!s.isObject(t))throw new m.UnrecognizedArgument(t);this._buildFromObject(t)}}b.isValidPath=function(t,e){if(s.isString(t)){var r=b._getDerivationIndexes(t);return null!==r&&s.every(r,b.isValidPath)}return!!s.isNumber(t)&&(t<b.Hardened&&!0===e&&(t+=b.Hardened),t>=0&&t<b.MaxIndex)},b._getDerivationIndexes=function(t){var e=t.split("/");if(s.includes(b.RootElementAlias,t))return[];if(!s.includes(b.RootElementAlias,e[0]))return null;var r=e.slice(1).map(function(t){var e="'"===t.slice(-1);if(e&&(t=t.slice(0,-1)),!t||"-"===t[0])return NaN;var r=+t;return e&&(r+=b.Hardened),r});return s.some(r,isNaN)?null:r},b.prototype.derive=function(t,e){return this.deriveNonCompliantChild(t,e)},b.prototype.deriveChild=function(t,e){if(s.isNumber(t))return this._deriveWithNumber(t,e);if(s.isString(t))return this._deriveFromString(t);throw new m.InvalidDerivationArgument(t)},b.prototype.deriveNonCompliantChild=function(t,e){if(s.isNumber(t))return this._deriveWithNumber(t,e,!0);if(s.isString(t))return this._deriveFromString(t,!0);throw new m.InvalidDerivationArgument(t)},b.prototype._deriveWithNumber=function(t,e,r){if(!b.isValidPath(t,e))throw new m.InvalidPath(t);e=t>=b.Hardened||e,t<b.Hardened&&!0===e&&(t+=b.Hardened);var s,o=y.integerAsBuffer(t);if(e&&r){var a=this.privateKey.bn.toBuffer();s=y.concat([new i.Buffer([0]),a,o])}else if(e){var h=this.privateKey.bn.toBuffer({size:32});n(32===h.length,"length of private key buffer is expected to be 32 bytes"),s=y.concat([new i.Buffer([0]),h,o])}else s=y.concat([this.publicKey.toBuffer(),o]);var c=f.sha512hmac(s,this._buffers.chainCode),l=u.fromBuffer(c.slice(0,32),{size:32}),g=c.slice(32,64),_=l.add(this.privateKey.toBigNumber()).mod(p.getN()).toBuffer({size:32});return d.isValid(_)?new b({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:g,privateKey:_}):this._deriveWithNumber(t+1,null,r)},b.prototype._deriveFromString=function(t,e){if(!b.isValidPath(t))throw new m.InvalidPath(t);return b._getDerivationIndexes(t).reduce(function(t,r){return t._deriveWithNumber(r,null,e)},this)},b.isValidSerialized=function(t,e){return!b.getSerializedError(t,e)},b.getSerializedError=function(t,e){if(!s.isString(t)&&!y.isBuffer(t))return new m.UnrecognizedArgument("Expected string or buffer");if(!a.validCharacters(t))return new g.InvalidB58Char("(unknown)",t);try{t=h.decode(t)}catch(e){return new g.InvalidB58Checksum(t)}if(t.length!==b.DataLength)return new m.InvalidLength(t);if(!s.isUndefined(e)){var r=b._validateNetwork(t,e);if(r)return r}return null},b._validateNetwork=function(t,e){var r=c.get(e);if(!r)return new g.InvalidNetworkArgument(e);var n=t.slice(0,4);return y.integerFromBuffer(n)!==r.xprivkey?new g.InvalidNetwork(n):null},b.fromString=function(t){return o.checkArgument(s.isString(t),"No valid string was provided"),new b(t)},b.fromObject=function(t){return o.checkArgument(s.isObject(t),"No valid argument was provided"),new b(t)},b.prototype._buildFromJSON=function(t){return this._buildFromObject(JSON.parse(t))},b.prototype._buildFromObject=function(t){var e={version:t.network?y.integerAsBuffer(c.get(t.network).xprivkey):t.version,depth:s.isNumber(t.depth)?y.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:s.isNumber(t.parentFingerPrint)?y.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:s.isNumber(t.childIndex)?y.integerAsBuffer(t.childIndex):t.childIndex,chainCode:s.isString(t.chainCode)?y.hexToBuffer(t.chainCode):t.chainCode,privateKey:s.isString(t.privateKey)&&_.isHexa(t.privateKey)?y.hexToBuffer(t.privateKey):t.privateKey,checksum:t.checksum?t.checksum.length?t.checksum:y.integerAsBuffer(t.checksum):void 0};return this._buildFromBuffers(e)},b.prototype._buildFromSerialized=function(t){var e=h.decode(t),r={version:e.slice(b.VersionStart,b.VersionEnd),depth:e.slice(b.DepthStart,b.DepthEnd),parentFingerPrint:e.slice(b.ParentFingerPrintStart,b.ParentFingerPrintEnd),childIndex:e.slice(b.ChildIndexStart,b.ChildIndexEnd),chainCode:e.slice(b.ChainCodeStart,b.ChainCodeEnd),privateKey:e.slice(b.PrivateKeyStart,b.PrivateKeyEnd),checksum:e.slice(b.ChecksumStart,b.ChecksumEnd),xprivkey:t};return this._buildFromBuffers(r)},b.prototype._generateRandomly=function(t){return b.fromSeed(l.getRandomBuffer(64),t)},b.fromSeed=function(t,e){if(_.isHexaString(t)&&(t=y.hexToBuffer(t)),!Buffer.isBuffer(t))throw new m.InvalidEntropyArgument(t);if(t.length<16)throw new m.InvalidEntropyArgument.NotEnoughEntropy(t);if(t.length>64)throw new m.InvalidEntropyArgument.TooMuchEntropy(t);var r=f.sha512hmac(t,new i.Buffer("Bitcoin seed"));return new b({network:c.get(e)||c.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},b.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var t=r(42);this._hdPublicKey=new t(this)}},b.prototype._buildFromBuffers=function(t){b._validateBufferArguments(t),_.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,y.emptyBuffer(1),t.privateKey],r=i.Buffer.concat(e);if(t.checksum&&t.checksum.length){if(t.checksum.toString()!==h.checksum(r).toString())throw new g.InvalidB58Checksum(r)}else t.checksum=h.checksum(r);var n,s=c.get(y.integerFromBuffer(t.version));n=h.encode(i.Buffer.concat(e)),t.xprivkey=new Buffer(n);var o=new d(u.fromBuffer(t.privateKey),s),a=o.toPublicKey(),p=b.ParentFingerPrintSize,l=f.sha256ripemd160(a.toBuffer()).slice(0,p);return _.defineImmutable(this,{xprivkey:n,network:s,depth:y.integerFromSingleByteBuffer(t.depth),privateKey:o,publicKey:a,fingerPrint:l}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},b._validateBufferArguments=function(t){var e=function(e,r){var i=t[e];n(y.isBuffer(i),e+" argument is not a buffer"),n(i.length===r,e+" has not the expected size: found "+i.length+", expected "+r)};e("version",b.VersionSize),e("depth",b.DepthSize),e("parentFingerPrint",b.ParentFingerPrintSize),e("childIndex",b.ChildIndexSize),e("chainCode",b.ChainCodeSize),e("privateKey",b.PrivateKeySize),t.checksum&&t.checksum.length&&e("checksum",b.CheckSumSize)},b.prototype.toString=function(){return this.xprivkey},b.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},b.prototype.toObject=b.prototype.toJSON=function(){return{network:c.get(y.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:y.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:y.integerFromBuffer(this.fingerPrint),parentFingerPrint:y.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:y.integerFromBuffer(this._buffers.childIndex),chainCode:y.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:y.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},b.fromBuffer=function(t){return new b(t.toString())},b.prototype.toBuffer=function(){return y.copy(this._buffers.xprivkey)},b.DefaultDepth=0,b.DefaultFingerprint=0,b.DefaultChildIndex=0,b.Hardened=2147483648,b.MaxIndex=2*b.Hardened,b.RootElementAlias=["m","M","m'","M'"],b.VersionSize=4,b.DepthSize=1,b.ParentFingerPrintSize=4,b.ChildIndexSize=4,b.ChainCodeSize=32,b.PrivateKeySize=32,b.CheckSumSize=4,b.DataLength=78,b.SerializedByteSize=82,b.VersionStart=0,b.VersionEnd=b.VersionStart+b.VersionSize,b.DepthStart=b.VersionEnd,b.DepthEnd=b.DepthStart+b.DepthSize,b.ParentFingerPrintStart=b.DepthEnd,b.ParentFingerPrintEnd=b.ParentFingerPrintStart+b.ParentFingerPrintSize,b.ChildIndexStart=b.ParentFingerPrintEnd,b.ChildIndexEnd=b.ChildIndexStart+b.ChildIndexSize,b.ChainCodeStart=b.ChildIndexEnd,b.ChainCodeEnd=b.ChainCodeStart+b.ChainCodeSize,b.PrivateKeyStart=b.ChainCodeEnd+1,b.PrivateKeyEnd=b.PrivateKeyStart+b.PrivateKeySize,b.ChecksumStart=b.PrivateKeyEnd,b.ChecksumEnd=b.ChecksumStart+b.CheckSumSize,n(b.ChecksumEnd===b.SerializedByteSize),t.exports=b},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(4),o=r(24),u=r(19),a=r(5),h=r(41),f=r(16),c=r(17),p=r(10),d=r(6),l=d,g=d.HDPublicKey,m=r(23),y=r(3),_=r(2);function b(t){if(t instanceof b)return t;if(!(this instanceof b))return new b(t);if(t){if(n.isString(t)||_.isBuffer(t)){var e=b.getSerializedError(t);if(e){if(_.isBuffer(t)&&!b.getSerializedError(t.toString()))return this._buildFromSerialized(t.toString());if(e instanceof g.ArgumentIsPrivateExtended)return new h(t).hdPublicKey;throw e}return this._buildFromSerialized(t)}if(n.isObject(t))return t instanceof h?this._buildFromPrivate(t):this._buildFromObject(t);throw new g.UnrecognizedArgument(t)}throw new g.MustSupplyArgument}b.isValidPath=function(t){if(n.isString(t)){var e=h._getDerivationIndexes(t);return null!==e&&n.every(e,b.isValidPath)}return!!n.isNumber(t)&&(t>=0&&t<b.Hardened)},b.prototype.derive=function(t,e){return this.deriveChild(t,e)},b.prototype.deriveChild=function(t,e){if(n.isNumber(t))return this._deriveWithNumber(t,e);if(n.isString(t))return this._deriveFromString(t);throw new g.InvalidDerivationArgument(t)},b.prototype._deriveWithNumber=function(t,e){if(t>=b.Hardened||e)throw new g.InvalidIndexCantDeriveHardened;if(t<0)throw new g.InvalidPath(t);var r,n=_.integerAsBuffer(t),i=_.concat([this.publicKey.toBuffer(),n]),o=a.sha512hmac(i,this._buffers.chainCode),u=s.fromBuffer(o.slice(0,32),{size:32}),h=o.slice(32,64);try{r=p.fromPoint(c.getG().mul(u).add(this.publicKey.point))}catch(e){return this._deriveWithNumber(t+1)}return new b({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:h,publicKey:r})},b.prototype._deriveFromString=function(t){if(n.includes(t,"'"))throw new g.InvalidIndexCantDeriveHardened;if(!b.isValidPath(t))throw new g.InvalidPath(t);return h._getDerivationIndexes(t).reduce(function(t,e){return t._deriveWithNumber(e)},this)},b.isValidSerialized=function(t,e){return n.isNull(b.getSerializedError(t,e))},b.getSerializedError=function(t,e){if(!n.isString(t)&&!_.isBuffer(t))return new g.UnrecognizedArgument("expected buffer or string");if(!o.validCharacters(t))return new l.InvalidB58Char("(unknown)",t);try{t=u.decode(t)}catch(e){return new l.InvalidB58Checksum(t)}if(t.length!==b.DataSize)return new g.InvalidLength(t);if(!n.isUndefined(e)){var r=b._validateNetwork(t,e);if(r)return r}var i=_.integerFromBuffer(t.slice(0,4));return i===f.livenet.xprivkey||i===f.testnet.xprivkey?new g.ArgumentIsPrivateExtended:null},b._validateNetwork=function(t,e){var r=f.get(e);if(!r)return new l.InvalidNetworkArgument(e);var n=t.slice(b.VersionStart,b.VersionEnd);return _.integerFromBuffer(n)!==r.xpubkey?new l.InvalidNetwork(n):null},b.prototype._buildFromPrivate=function(t){var e=n.clone(t._buffers),r=c.getG().mul(s.fromBuffer(e.privateKey));return e.publicKey=c.pointToCompressed(r),e.version=_.integerAsBuffer(f.get(_.integerFromBuffer(e.version)).xpubkey),e.privateKey=void 0,e.checksum=void 0,e.xprivkey=void 0,this._buildFromBuffers(e)},b.prototype._buildFromObject=function(t){var e={version:t.network?_.integerAsBuffer(f.get(t.network).xpubkey):t.version,depth:n.isNumber(t.depth)?_.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:n.isNumber(t.parentFingerPrint)?_.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:n.isNumber(t.childIndex)?_.integerAsBuffer(t.childIndex):t.childIndex,chainCode:n.isString(t.chainCode)?_.hexToBuffer(t.chainCode):t.chainCode,publicKey:n.isString(t.publicKey)?_.hexToBuffer(t.publicKey):_.isBuffer(t.publicKey)?t.publicKey:t.publicKey.toBuffer(),checksum:n.isNumber(t.checksum)?_.integerAsBuffer(t.checksum):t.checksum};return this._buildFromBuffers(e)},b.prototype._buildFromSerialized=function(t){var e=u.decode(t),r={version:e.slice(b.VersionStart,b.VersionEnd),depth:e.slice(b.DepthStart,b.DepthEnd),parentFingerPrint:e.slice(b.ParentFingerPrintStart,b.ParentFingerPrintEnd),childIndex:e.slice(b.ChildIndexStart,b.ChildIndexEnd),chainCode:e.slice(b.ChainCodeStart,b.ChainCodeEnd),publicKey:e.slice(b.PublicKeyStart,b.PublicKeyEnd),checksum:e.slice(b.ChecksumStart,b.ChecksumEnd),xpubkey:t};return this._buildFromBuffers(r)},b.prototype._buildFromBuffers=function(t){b._validateBufferArguments(t),y.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,t.publicKey],r=_.concat(e),n=u.checksum(r);if(t.checksum&&t.checksum.length){if(t.checksum.toString("hex")!==n.toString("hex"))throw new l.InvalidB58Checksum(r,n)}else t.checksum=n;var i,s=f.get(_.integerFromBuffer(t.version));i=u.encode(_.concat(e)),t.xpubkey=new Buffer(i);var o=new p(t.publicKey,{network:s}),h=b.ParentFingerPrintSize,c=a.sha256ripemd160(o.toBuffer()).slice(0,h);return y.defineImmutable(this,{xpubkey:i,network:s,depth:_.integerFromSingleByteBuffer(t.depth),publicKey:o,fingerPrint:c}),this},b._validateBufferArguments=function(t){var e=function(e,r){var n=t[e];m(_.isBuffer(n),e+" argument is not a buffer, it's "+typeof n),m(n.length===r,e+" has not the expected size: found "+n.length+", expected "+r)};e("version",b.VersionSize),e("depth",b.DepthSize),e("parentFingerPrint",b.ParentFingerPrintSize),e("childIndex",b.ChildIndexSize),e("chainCode",b.ChainCodeSize),e("publicKey",b.PublicKeySize),t.checksum&&t.checksum.length&&e("checksum",b.CheckSumSize)},b.fromString=function(t){return i.checkArgument(n.isString(t),"No valid string was provided"),new b(t)},b.fromObject=function(t){return i.checkArgument(n.isObject(t),"No valid argument was provided"),new b(t)},b.prototype.toString=function(){return this.xpubkey},b.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},b.prototype.toObject=b.prototype.toJSON=function(){return{network:f.get(_.integerFromBuffer(this._buffers.version)).name,depth:_.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:_.integerFromBuffer(this.fingerPrint),parentFingerPrint:_.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:_.integerFromBuffer(this._buffers.childIndex),chainCode:_.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:_.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},b.fromBuffer=function(t){return new b(t)},b.prototype.toBuffer=function(){return _.copy(this._buffers.xpubkey)},b.Hardened=2147483648,b.RootElementAlias=["m","M"],b.VersionSize=4,b.DepthSize=1,b.ParentFingerPrintSize=4,b.ChildIndexSize=4,b.ChainCodeSize=32,b.PublicKeySize=33,b.CheckSumSize=4,b.DataSize=78,b.SerializedByteSize=82,b.VersionStart=0,b.VersionEnd=b.VersionStart+b.VersionSize,b.DepthStart=b.VersionEnd,b.DepthEnd=b.DepthStart+b.DepthSize,b.ParentFingerPrintStart=b.DepthEnd,b.ParentFingerPrintEnd=b.ParentFingerPrintStart+b.ParentFingerPrintSize,b.ChildIndexStart=b.ParentFingerPrintEnd,b.ChildIndexEnd=b.ChildIndexStart+b.ChildIndexSize,b.ChainCodeStart=b.ChildIndexEnd,b.ChainCodeEnd=b.ChainCodeStart+b.ChainCodeSize,b.PublicKeyStart=b.ChainCodeEnd,b.PublicKeyEnd=b.PublicKeyStart+b.PublicKeySize,b.ChecksumStart=b.PublicKeyEnd,b.ChecksumEnd=b.ChecksumStart+b.CheckSumSize,m(b.PublicKeyEnd===b.DataSize),m(b.ChecksumEnd===b.SerializedByteSize),t.exports=b},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(9),o=(Buffer.compare||r(38),r(6)),u=r(2),a=r(3),h=r(13),f=r(8),c=r(12);function p(t){if(t){if(t instanceof p)return p.shallowCopy(t);if(a.isHexa(t))return this.fromString(t);if(u.isBuffer(t))return this.fromBuffer(t);if(n.isObject(t))return this.fromObject(t);throw new o.InvalidArgument("Must provide an object or string to deserialize a transaction")}this._newGovObject()}p.prototype.dataHex=function(){return null},p.prototype._newGovObject=function(){return null},p.prototype.fromObject=function(t){var e;if(!(n.isObject(t)||t instanceof p)){try{var r=JSON.parse(t)}catch(t){throw new Error("Must be a valid stringified JSON")}return this.fromObject(r)}switch(e=t,n.each([["type","number"]],function(t){var r=t[0],n=t[1];if(!e.hasOwnProperty(r))throw new Error("Must be a valid JSON - Property "+r+" missing");var i=typeof e[r];if(i!==n)throw new Error("Must be a valid JSON - Expected property "+r+" to be a "+n+" received:"+i)}),e.type){case 1:var i=new p.Proposal;return i=i.fromObject(e);default:throw new Error("Unhandled GovObject type")}},p.prototype.fromString=function(t){return this.fromBuffer(new s.Buffer(t,"hex"))},p.prototype.checkedSerialize=function(t){var e=this.getSerializationError(t);if(e)throw e;return this.uncheckedSerialize()},p.prototype.serialize=function(t){return!0===t||t&&t.disableAll?this.uncheckedSerialize():this.checkedSerialize(t)},p.prototype.uncheckedSerialize=p.prototype.toString=function(){return this.toBuffer().toString("hex")},p.prototype.inspect=function(){return"<GovObject: "+this.uncheckedSerialize()+">"},p.prototype.toBuffer=function(){var t=new f;return this.toBufferWriter(t).toBuffer()},p.prototype.toBufferWriter=function(t){return t.write(new Buffer(this.dataHex())),t},p.prototype.fromBuffer=function(t){var e=new h(t);return this.fromBufferReader(e)},p.prototype.fromBufferReader=function(t){i.checkArgument(!t.finished(),"No data received");var e=t.read(t.buf.length),r=JSON.parse(e.toString("utf8"))[0][1];return this.fromObject(r)},p.prototype._verifyDateFormat=function(t){return new Date(1e3*t)},p.prototype._verifyPayment=function(t){var e=parseFloat(t);return!!isNaN(e)||Boolean(e<=0)},p.prototype._verifyAddress=function(t,e){return c.isValid(t,e)},p.prototype._verifyPayToScriptHash=function(t,e){return new c(t,e).isPayToScriptHash()},p.prototype._verifyUrl=function(t){return/^(http|https):\/\/[^ "]{1,255}$/.test(t)},p.prototype._verifyName=function(t){return/^[-_a-zA-Z0-9]{1,40}$/.test(t)},p.shallowCopy=function(t){return new p(t.toBuffer())},t.exports=p},function(t,e,r){"use strict";var n=t.exports;n.version="v"+r(45).version,n.versionGuard=function(t){if(void 0!==t){console.warn("More than one instance of dashcore-lib found. Please make sure that you are not mixing instances of classes of the different versions of dashcore.")}},n.versionGuard(global._bitcore),global._bitcore=n.version,n.crypto={},n.crypto.BN=r(4),n.crypto.ECDSA=r(28),n.crypto.Hash=r(5),n.crypto.Random=r(26),n.crypto.Point=r(17),n.crypto.Signature=r(7),n.encoding={},n.encoding.Base58=r(24),n.encoding.Base58Check=r(19),n.encoding.BufferReader=r(13),n.encoding.BufferWriter=r(8),n.encoding.Varint=r(55),n.util={},n.util.buffer=r(2),n.util.js=r(3),n.util.preconditions=r(1),n.errors=r(6),n.Address=r(12),n.Block=r(56),n.MerkleBlock=r(40),n.BlockHeader=r(27),n.HDPrivateKey=r(41),n.HDPublicKey=r(42),n.Networks=r(16),n.Opcode=r(29),n.PrivateKey=r(18),n.PublicKey=r(10),n.Script=r(11),n.Transaction=r(25),n.GovObject=r(58),n.URI=r(61),n.Unit=r(32),n.Message=r(63),n.deps={},n.deps.bnjs=r(33),n.deps.bs58=r(36),n.deps.Buffer=Buffer,n.deps.elliptic=r(34),n.deps._=r(0),n.Transaction.sighash=r(14)},function(t){t.exports={name:"mix-lib",version:"1.0.2",description:"A pure and powerful JavaScript Multiple Coins library.",author:"nasa8x",main:"./dist/index.js",scripts:{dev:"cross-env NODE_ENV=development webpack --progress --watch --colors",prod:"cross-env NODE_ENV=production webpack -p --progress --colors",lint:"jshint . || true",test:"npm run build && npm run test:node && npm run test:browser && npm run lint","test:node":"mocha --no-timeouts --recursive","test:browser":"karma start ./karma.conf.js --single-run",coverage:"nyc mocha --recursive",build:"webpack --display-error-details"},contributors:[{name:"Daniel Cousens",email:"bitcoin@dcousens.com"},{name:"Esteban Ordano",email:"eordano@gmail.com"},{name:"Gordon Hall",email:"gordon@bitpay.com"},{name:"Jeff Garzik",email:"jgarzik@bitpay.com"},{name:"Kyle Drake",email:"kyle@kyledrake.net"},{name:"Manuel Araoz",email:"manuelaraoz@gmail.com"},{name:"Matias Alejo Garcia",email:"ematiu@gmail.com"},{name:"Ryan X. Charles",email:"ryanxcharles@gmail.com"},{name:"Stefan Thomas",email:"moon@justmoon.net"},{name:"Stephen Pair",email:"stephen@bitpay.com"},{name:"Wei Lu",email:"luwei.here@gmail.com"},{name:"UdjinM6",email:"UdjinM6@gmail.com"},{name:"Jon Kindel",email:"jon@dash.org"},{name:"Alex Werner",email:"alex@werner.fr"}],keywords:["Bitcoin","GeekCash","Geek","dash","transaction","address","p2p","ecies","cryptocurrency","blockchain","payment","bip21","bip32","bip37","bip69","bip70","multisig","dashcore"],repository:{type:"git",url:"https://github.com/nasa8x/mix-lib.git"},bugs:{url:"https://github.com/nasa8x/mix-lib/issues"},homepage:"https://github.com/nasa8x/mix-lib",browser:{request:"browser-request"},dependencies:{"@dashevo/x11-hash-js":"^1.0.2","bn.js":"^3.3.0",bs58:"^4.0.1","buffer-compare":"^1.1.1",elliptic:"=3.0.3",inherits:"=2.0.1",lodash:"^4.17.10",sha512:"=0.0.1"},devDependencies:{brfs:"^1.6.1",chai:"^1.10.0",gulp:"^3.8.10",jshint:"^2.9.6",karma:"^2.0.5","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.2.0","karma-detect-browsers":"^2.3.3","karma-firefox-launcher":"^1.1.0","karma-mocha":"^1.3.0","karma-mocha-reporter":"^2.2.5","karma-webpack":"^3.0.4",mocha:"^5.2.0",nyc:"^11.9.0","raw-loader":"^0.5.1",sinon:"^4.5.0","transform-loader":"^0.2.4","uglifyjs-webpack-plugin":"^1.3.0","babel-core":"^6.26.3","babel-loader":"^7.1.2","babel-plugin-syntax-dynamic-import":"^6.18.0","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-preset-es2015":"^6.24.1","babel-preset-stage-0":"^6.24.1","babel-preset-stage-2":"^6.24.1","clean-webpack-plugin":"^0.1.19","cross-env":"^5.1.4",webpack:"^4.18.0","webpack-cli":"^3.1.0","webpack-node-externals":"^1.6.0"},license:"MIT"}},function(t,e,r){"use strict";t.exports=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message:function(){return"Invalid Argument"+(arguments[0]?": "+arguments[0]:"")+(arguments[1]?" Documentation: http://bitcore.io/"+arguments[1]:"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message:function(){return"Invalid Argument for "+arguments[2]+", expected "+arguments[1]+" but got "+typeof arguments[0]}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"GovObject",message:"Internal Error on GovObject {0}",errors:[{name:"Proposal",message:"Internal Error on Proposal {0}",errors:[{name:"invalidDate",message:"Invalid Date"},{name:"invalidDateWindow",message:"Invalid Timespan"},{name:"invalidAddress",message:"Invalid Address"},{name:"invalidP2SHAddress",message:"Invalid P2SHAddress"},{name:"invalidPayment",message:"Invalid Payment Amount"},{name:"invalidUrl",message:"Invalid URL"},{name:"invalidName",message:"Invalid Name"}]}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be a hex string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]}]},function(t,e){t.exports=require("sha512")},function(t,e){t.exports=require("@dashevo/x11-hash-js")},function(t,e){t.exports=[{name:"GeekCash",alias:"GEEK",pubkeyhash:38,privatekey:204,scripthash:16,xpubkey:76067358,xprivkey:76066276,networkMagic:3205262269,port:6888,dnsSeeds:["ns01.geekcash.org","ns02.geekcash.org","ns03.geekcash.org","ns04.geekcash.org","ns05.geekcash.org"]},{name:"Dash",alias:"DASH",pubkeyhash:76,privatekey:204,scripthash:16,xpubkey:76067358,xprivkey:76066276,networkMagic:3205262269,port:9999,dnsSeeds:["dnsseed.darkcoin.io","dnsseed.dashdot.io","dnsseed.masternode.io","dnsseed.dashpay.io"]},{name:"Bitcoin",alias:"BTC",pubkeyhash:0,privatekey:128,scripthash:5,xpubkey:76067358,xprivkey:76066276,networkMagic:4190024921,port:8333,dnsSeeds:["seed.bitcoin.sipa.be","dnsseed.bluematt.me","dnsseed.bitcoin.dashjr.org","seed.bitcoinstats.com","seed.bitnodes.io","bitseed.xf2.org"]},{name:"BitcoinCash",alias:"BCH",pubkeyhash:0,privatekey:128,xpubkey:76067358,xprivkey:76066276,port:8333},{name:"PIVX",alias:"PIVX",pubkeyhash:30,privatekey:212,xpubkey:76067358,xprivkey:76066276,port:51472},{name:"Litecoin",alias:"LTC",pubkeyhash:48,privatekey:176,xpubkey:76067358,xprivkey:76066276,port:9333},{name:"ColossusXT",alias:"COLX",pubkeyhash:30,privatekey:212,xpubkey:76067358,xprivkey:76066276,port:51572},{name:"Aegeus",alias:"AEG",pubkeyhash:23,privatekey:151,xpubkey:76067358,xprivkey:76066276,port:9292},{name:"MetaCash",alias:"META",pubkeyhash:50,privatekey:178,xpubkey:76067358,xprivkey:76066276,port:40293},{name:"MMOCoin",alias:"MMO",pubkeyhash:50,privatekey:178,xpubkey:76067358,xprivkey:76066276},{name:"LightPayCoin",alias:"LPC",pubkeyhash:49,privatekey:179,xpubkey:76067358,xprivkey:76066276,port:39797},{name:"Northern",alias:"NORT",pubkeyhash:51,privatekey:46,xpubkey:76067358,xprivkey:76066276,port:6942},{name:"DeepOnion",alias:"ONION",pubkeyhash:31,privatekey:159,xpubkey:76067358,xprivkey:76066276},{name:"DigiByte",alias:"DGB",pubkeyhash:30,privatekey:158,xpubkey:76067358,xprivkey:76066276},{name:"Zcash",alias:"ZEC",pubkeyhash:28,privatekey:128,xpubkey:76067358,xprivkey:76066276,port:8233},{name:"Stakenet",alias:"XSN",pubkeyhash:76,privatekey:204,xpubkey:76067358,xprivkey:76066276,port:9999},{name:"Stakecube",alias:"SCC",pubkeyhash:125,privatekey:253,xpubkey:76067358,xprivkey:76066276,port:17133},{name:"Alqo",alias:"ALQ",pubkeyhash:23,privatekey:193,xpubkey:76067358,xprivkey:76066276,port:55500},{name:"Trittium",alias:"TRTT",pubkeyhash:65,privatekey:193,xpubkey:76067358,xprivkey:76066276},{name:"Blocknet",alias:"BLOCK",pubkeyhash:26,privatekey:149,xpubkey:76067358,xprivkey:76066276}]},function(t,e,r){"use strict";var n=r(0),i=r(37),s=r(29),o=r(4),u=r(5),a=r(7),h=r(10),f=function t(e){if(!(this instanceof t))return new t(e);e?(this.initialize(),this.set(e)):this.initialize()};f.prototype.verify=function(t,e,s,o,u){var a,h=r(25);if(n.isUndefined(s)&&(s=new h),n.isUndefined(o)&&(o=0),n.isUndefined(u)&&(u=0),this.set({script:t,tx:s,nin:o,flags:u}),0!=(u&f.SCRIPT_VERIFY_SIGPUSHONLY)&&!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;u&f.SCRIPT_VERIFY_P2SH&&(a=this.stack.slice());var c=this.stack;if(this.initialize(),this.set({script:e,stack:c,tx:s,nin:o,flags:u}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var p=this.stack[this.stack.length-1];if(!f.castToBool(p))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;if(u&f.SCRIPT_VERIFY_P2SH&&e.isScriptHashOut()){if(!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===a.length)throw new Error("internal error - stack copy empty");var d=a[a.length-1],l=i.fromBuffer(d);return a.pop(),this.initialize(),this.set({script:l,stack:a,tx:s,nin:o,flags:u}),!!this.evaluate()&&(0===a.length?(this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",!1):!!f.castToBool(a[a.length-1])||(this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",!1))}return!0},t.exports=f,f.prototype.initialize=function(t){this.stack=[],this.altstack=[],this.pc=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},f.prototype.set=function(t){this.script=t.script||this.script,this.tx=t.tx||this.tx,this.nin=void 0!==t.nin?t.nin:this.nin,this.stack=t.stack||this.stack,this.altstack=t.altack||this.altstack,this.pc=void 0!==t.pc?t.pc:this.pc,this.pbegincodehash=void 0!==t.pbegincodehash?t.pbegincodehash:this.pbegincodehash,this.nOpCount=void 0!==t.nOpCount?t.nOpCount:this.nOpCount,this.vfExec=t.vfExec||this.vfExec,this.errstr=t.errstr||this.errstr,this.flags=void 0!==t.flags?t.flags:this.flags},f.true=new Buffer([1]),f.false=new Buffer([]),f.MAX_SCRIPT_ELEMENT_SIZE=520,f.LOCKTIME_THRESHOLD_BN=new o(f.LOCKTIME_THRESHOLD=5e8),f.SCRIPT_VERIFY_NONE=0,f.SCRIPT_VERIFY_P2SH=1,f.SCRIPT_VERIFY_STRICTENC=2,f.SCRIPT_VERIFY_DERSIG=4,f.SCRIPT_VERIFY_LOW_S=8,f.SCRIPT_VERIFY_NULLDUMMY=16,f.SCRIPT_VERIFY_SIGPUSHONLY=32,f.SCRIPT_VERIFY_MINIMALDATA=64,f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,f.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,f.castToBool=function(t){for(var e=0;e<t.length;e++)if(0!==t[e])return e!==t.length-1||128!==t[e];return!1},f.prototype.checkSignatureEncoding=function(t){if(0!=(this.flags&(f.SCRIPT_VERIFY_DERSIG|f.SCRIPT_VERIFY_LOW_S|f.SCRIPT_VERIFY_STRICTENC))&&!a.isTxDER(t))return this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1;if(0!=(this.flags&f.SCRIPT_VERIFY_LOW_S)){if(!a.fromTxFormat(t).hasLowS())return this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1}else if(0!=(this.flags&f.SCRIPT_VERIFY_STRICTENC)&&!a.fromTxFormat(t).hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;return!0},f.prototype.checkPubkeyEncoding=function(t){return!(0!=(this.flags&f.SCRIPT_VERIFY_STRICTENC)&&!h.isValid(t))||(this.errstr="SCRIPT_ERR_PUBKEYTYPE",!1)},f.prototype.evaluate=function(){if(this.script.toBuffer().length>1e4)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){if(!this.step())return!1}if(this.stack.length+this.altstack.length>1e3)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(t){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: "+t,!1}return!(this.vfExec.length>0)||(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1)},f.prototype.checkLockTime=function(t){return!!(this.tx.nLockTime<f.LOCKTIME_THRESHOLD&&t.lt(f.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=f.LOCKTIME_THRESHOLD&&t.gte(f.LOCKTIME_THRESHOLD_BN))&&(!t.gt(new o(this.tx.nLockTime))&&!!this.tx.inputs[this.nin].isFinal())},f.prototype.step=function(){var t,e,r,c,p,d,l,g,m,y,_,b,v,S,k,I,w,O=0!=(this.flags&f.SCRIPT_VERIFY_MINIMALDATA),P=-1===this.vfExec.indexOf(!1),E=this.script.chunks[this.pc];this.pc++;var B=E.opcodenum;if(n.isUndefined(B))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(E.buf&&E.buf.length>f.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(B>s.OP_16&&++this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(B===s.OP_CAT||B===s.OP_SUBSTR||B===s.OP_LEFT||B===s.OP_RIGHT||B===s.OP_INVERT||B===s.OP_AND||B===s.OP_OR||B===s.OP_XOR||B===s.OP_2MUL||B===s.OP_2DIV||B===s.OP_MUL||B===s.OP_DIV||B===s.OP_MOD||B===s.OP_LSHIFT||B===s.OP_RSHIFT)return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(P&&0<=B&&B<=s.OP_PUSHDATA4){if(O&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(E.buf){if(E.len!==E.buf.length)throw new Error("Length of push value not equal to length of data");this.stack.push(E.buf)}else this.stack.push(f.false)}else if(P||s.OP_IF<=B&&B<=s.OP_ENDIF)switch(B){case s.OP_1NEGATE:case s.OP_1:case s.OP_2:case s.OP_3:case s.OP_4:case s.OP_5:case s.OP_6:case s.OP_7:case s.OP_8:case s.OP_9:case s.OP_10:case s.OP_11:case s.OP_12:case s.OP_13:case s.OP_14:case s.OP_15:case s.OP_16:p=B-(s.OP_1-1),t=new o(p).toScriptNumBuffer(),this.stack.push(t);break;case s.OP_NOP:break;case s.OP_NOP2:case s.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&f.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var A=o.fromScriptNumBuffer(this.stack[this.stack.length-1],O,5);if(A.lt(new o(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime(A))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case s.OP_NOP1:case s.OP_NOP3:case s.OP_NOP4:case s.OP_NOP5:case s.OP_NOP6:case s.OP_NOP7:case s.OP_NOP8:case s.OP_NOP9:case s.OP_NOP10:if(this.flags&f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case s.OP_IF:case s.OP_NOTIF:if(I=!1,P){if(this.stack.length<1)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;t=this.stack.pop(),I=f.castToBool(t),B===s.OP_NOTIF&&(I=!I)}this.vfExec.push(I);break;case s.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case s.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case s.OP_VERIFY:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(t=this.stack[this.stack.length-1],!(I=f.castToBool(t)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case s.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case s.OP_TOALTSTACK:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case s.OP_FROMALTSTACK:if(this.altstack.length<1)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case s.OP_2DROP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case s.OP_2DUP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],this.stack.push(e),this.stack.push(r);break;case s.OP_3DUP:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-3],r=this.stack[this.stack.length-2];var T=this.stack[this.stack.length-1];this.stack.push(e),this.stack.push(r),this.stack.push(T);break;case s.OP_2OVER:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-4],r=this.stack[this.stack.length-3],this.stack.push(e),this.stack.push(r);break;case s.OP_2ROT:if(this.stack.length<6)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;c=this.stack.splice(this.stack.length-6,2),this.stack.push(c[0]),this.stack.push(c[1]);break;case s.OP_2SWAP:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;c=this.stack.splice(this.stack.length-4,2),this.stack.push(c[0]),this.stack.push(c[1]);break;case s.OP_IFDUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-1],(I=f.castToBool(t))&&this.stack.push(t);break;case s.OP_DEPTH:t=new o(this.stack.length).toScriptNumBuffer(),this.stack.push(t);break;case s.OP_DROP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case s.OP_DUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-1]);break;case s.OP_NIP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case s.OP_OVER:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-2]);break;case s.OP_PICK:case s.OP_ROLL:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(t=this.stack[this.stack.length-1],p=(g=o.fromScriptNumBuffer(t,O)).toNumber(),this.stack.pop(),p<0||p>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-p-1],B===s.OP_ROLL&&this.stack.splice(this.stack.length-p-1,1),this.stack.push(t);break;case s.OP_ROT:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;d=this.stack[this.stack.length-3],l=this.stack[this.stack.length-2];var x=this.stack[this.stack.length-1];this.stack[this.stack.length-3]=l,this.stack[this.stack.length-2]=x,this.stack[this.stack.length-1]=d;break;case s.OP_SWAP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;d=this.stack[this.stack.length-2],l=this.stack[this.stack.length-1],this.stack[this.stack.length-2]=l,this.stack[this.stack.length-1]=d;break;case s.OP_TUCK:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,this.stack[this.stack.length-1]);break;case s.OP_SIZE:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;g=new o(this.stack[this.stack.length-1].length),this.stack.push(g.toScriptNumBuffer());break;case s.OP_EQUAL:case s.OP_EQUALVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1];var N=e.toString("hex")===r.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(N?f.true:f.false),B===s.OP_EQUALVERIFY){if(!N)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case s.OP_1ADD:case s.OP_1SUB:case s.OP_NEGATE:case s.OP_ABS:case s.OP_NOT:case s.OP_0NOTEQUAL:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(t=this.stack[this.stack.length-1],g=o.fromScriptNumBuffer(t,O),B){case s.OP_1ADD:g=g.add(o.One);break;case s.OP_1SUB:g=g.sub(o.One);break;case s.OP_NEGATE:g=g.neg();break;case s.OP_ABS:g.cmp(o.Zero)<0&&(g=g.neg());break;case s.OP_NOT:g=new o((0===g.cmp(o.Zero))+0);break;case s.OP_0NOTEQUAL:g=new o((0!==g.cmp(o.Zero))+0)}this.stack.pop(),this.stack.push(g.toScriptNumBuffer());break;case s.OP_ADD:case s.OP_SUB:case s.OP_BOOLAND:case s.OP_BOOLOR:case s.OP_NUMEQUAL:case s.OP_NUMEQUALVERIFY:case s.OP_NUMNOTEQUAL:case s.OP_LESSTHAN:case s.OP_GREATERTHAN:case s.OP_LESSTHANOREQUAL:case s.OP_GREATERTHANOREQUAL:case s.OP_MIN:case s.OP_MAX:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(m=o.fromScriptNumBuffer(this.stack[this.stack.length-2],O),y=o.fromScriptNumBuffer(this.stack[this.stack.length-1],O),g=new o(0),B){case s.OP_ADD:g=m.add(y);break;case s.OP_SUB:g=m.sub(y);break;case s.OP_BOOLAND:g=new o((0!==m.cmp(o.Zero)&&0!==y.cmp(o.Zero))+0);break;case s.OP_BOOLOR:g=new o((0!==m.cmp(o.Zero)||0!==y.cmp(o.Zero))+0);break;case s.OP_NUMEQUAL:case s.OP_NUMEQUALVERIFY:g=new o((0===m.cmp(y))+0);break;case s.OP_NUMNOTEQUAL:g=new o((0!==m.cmp(y))+0);break;case s.OP_LESSTHAN:g=new o((m.cmp(y)<0)+0);break;case s.OP_GREATERTHAN:g=new o((m.cmp(y)>0)+0);break;case s.OP_LESSTHANOREQUAL:g=new o((m.cmp(y)<=0)+0);break;case s.OP_GREATERTHANOREQUAL:g=new o((m.cmp(y)>=0)+0);break;case s.OP_MIN:g=m.cmp(y)<0?m:y;break;case s.OP_MAX:g=m.cmp(y)>0?m:y}if(this.stack.pop(),this.stack.pop(),this.stack.push(g.toScriptNumBuffer()),B===s.OP_NUMEQUALVERIFY){if(!f.castToBool(this.stack[this.stack.length-1]))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case s.OP_WITHIN:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;m=o.fromScriptNumBuffer(this.stack[this.stack.length-3],O),y=o.fromScriptNumBuffer(this.stack[this.stack.length-2],O);var R=o.fromScriptNumBuffer(this.stack[this.stack.length-1],O);I=y.cmp(m)<=0&&m.cmp(R)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(I?f.true:f.false);break;case s.OP_RIPEMD160:case s.OP_SHA1:case s.OP_SHA256:case s.OP_HASH160:case s.OP_HASH256:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var C;t=this.stack[this.stack.length-1],B===s.OP_RIPEMD160?C=u.ripemd160(t):B===s.OP_SHA1?C=u.sha1(t):B===s.OP_SHA256?C=u.sha256(t):B===s.OP_HASH160?C=u.sha256ripemd160(t):B===s.OP_HASH256&&(C=u.sha256sha256(t)),this.stack.pop(),this.stack.push(C);break;case s.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case s.OP_CHECKSIG:case s.OP_CHECKSIGVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;_=this.stack[this.stack.length-2],b=this.stack[this.stack.length-1],v=(new i).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var U=(new i).add(_);if(v.findAndDelete(U),!this.checkSignatureEncoding(_)||!this.checkPubkeyEncoding(b))return!1;try{S=a.fromTxFormat(_),k=h.fromBuffer(b,!1),w=this.tx.verifySignature(S,k,this.nin,v)}catch(t){w=!1}if(this.stack.pop(),this.stack.pop(),this.stack.push(w?f.true:f.false),B===s.OP_CHECKSIGVERIFY){if(!w)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case s.OP_CHECKMULTISIG:case s.OP_CHECKMULTISIGVERIFY:var H=1;if(this.stack.length<H)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var K=o.fromScriptNumBuffer(this.stack[this.stack.length-H],O).toNumber();if(K<0||K>20)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=K,this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var F=++H;if(H+=K,this.stack.length<H)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var D=o.fromScriptNumBuffer(this.stack[this.stack.length-H],O).toNumber();if(D<0||D>K)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var L=++H;if(H+=D,this.stack.length<H)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;v=(new i).set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var M=0;M<D;M++)_=this.stack[this.stack.length-L-M],v.findAndDelete((new i).add(_));for(w=!0;w&&D>0;){if(_=this.stack[this.stack.length-L],b=this.stack[this.stack.length-F],!this.checkSignatureEncoding(_)||!this.checkPubkeyEncoding(b))return!1;var V;try{S=a.fromTxFormat(_),k=h.fromBuffer(b,!1),V=this.tx.verifySignature(S,k,this.nin,v)}catch(t){V=!1}V&&(L++,D--),F++,D>--K&&(w=!1)}for(;H-- >1;)this.stack.pop();if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&f.SCRIPT_VERIFY_NULLDUMMY&&this.stack[this.stack.length-1].length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(w?f.true:f.false),B===s.OP_CHECKMULTISIGVERIFY){if(!w)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0}},function(t,e,r){"use strict";var n=r(21),i=r(1),s=(r(2),r(20)),o=r(15),u=r(14),a=r(11),h=r(7),f=r(22);function c(){s.apply(this,arguments)}n(c,s),c.prototype.getSignatures=function(t,e,r,n){i.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL;var s=e.toPublicKey();return s.toString()===this.output.script.getPublicKey().toString("hex")?[new f({publicKey:s,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:u.sign(t,e,n,r,this.output.script),sigtype:n})]:[]},c.prototype.addSignature=function(t,e){return i.checkState(this.isValidSignature(t,e),"Signature is invalid"),this.setScript(a.buildPublicKeyIn(e.signature.toDER(),e.sigtype)),this},c.prototype.clearSignatures=function(){return this.setScript(a.empty()),this},c.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},c.SCRIPT_MAX_SIZE=73,c.prototype._estimateSize=function(){return c.SCRIPT_MAX_SIZE},t.exports=c},function(t,e,r){"use strict";var n=r(21),i=r(1),s=r(2),o=r(5),u=r(20),a=r(15),h=r(14),f=r(11),c=r(7),p=r(22);function d(){u.apply(this,arguments)}n(d,u),d.prototype.getSignatures=function(t,e,r,n,u){return i.checkState(this.output instanceof a),u=u||o.sha256ripemd160(e.publicKey.toBuffer()),n=n||c.SIGHASH_ALL,s.equals(u,this.output.script.getPublicKeyHash())?[new p({publicKey:e.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:h.sign(t,e,n,r,this.output.script),sigtype:n})]:[]},d.prototype.addSignature=function(t,e){return i.checkState(this.isValidSignature(t,e),"Signature is invalid"),this.setScript(f.buildPublicKeyHashIn(e.publicKey,e.signature.toDER(),e.sigtype)),this},d.prototype.clearSignatures=function(){return this.setScript(f.empty()),this},d.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn()},d.SCRIPT_MAX_SIZE=107,d.prototype._estimateSize=function(){return d.SCRIPT_MAX_SIZE},t.exports=d},function(t,e,r){"use strict";var n=r(0),i=r(21),s=(r(30),r(20)),o=r(15),u=r(1),a=r(11),h=r(7),f=r(14),c=(r(10),r(2)),p=r(22);function d(t,e,r,i){s.apply(this,arguments);var o=this;e=e||t.publicKeys,r=r||t.threshold,i=i||t.signatures,this.publicKeys=n.sortBy(e,function(t){return t.toString("hex")}),u.checkState(a.buildMultisigOut(this.publicKeys,r).equals(this.output.script),"Provided public keys don't match to the provided output script"),this.publicKeyIndex={},n.each(this.publicKeys,function(t,e){o.publicKeyIndex[t.toString()]=e}),this.threshold=r,this.signatures=i?this._deserializeSignatures(i):new Array(this.publicKeys.length)}i(d,s),d.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=n.map(this.publicKeys,function(t){return t.toString()}),t.signatures=this._serializeSignatures(),t},d.prototype._deserializeSignatures=function(t){return n.map(t,function(t){if(t)return new p(t)})},d.prototype._serializeSignatures=function(){return n.map(this.signatures,function(t){if(t)return t.toObject()})},d.prototype.getSignatures=function(t,e,r,i){u.checkState(this.output instanceof o),i=i||h.SIGHASH_ALL;var s=this,a=[];return n.each(this.publicKeys,function(n){n.toString()===e.publicKey.toString()&&a.push(new p({publicKey:e.publicKey,prevTxId:s.prevTxId,outputIndex:s.outputIndex,inputIndex:r,signature:f.sign(t,e,i,r,s.output.script),sigtype:i}))}),a},d.prototype.addSignature=function(t,e){return u.checkState(!this.isFullySigned(),"All needed signatures have already been added"),u.checkArgument(!n.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),u.checkState(this.isValidSignature(t,e)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this._updateScript(),this},d.prototype._updateScript=function(){return this.setScript(a.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures())),this},d.prototype._createSignatures=function(){return n.map(n.filter(this.signatures,function(t){return!n.isUndefined(t)}),function(t){return c.concat([t.signature.toDER(),c.integerAsSingleByteBuffer(t.sigtype)])})},d.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},d.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},d.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},d.prototype.countSignatures=function(){return n.reduce(this.signatures,function(t,e){return t+!!e},0)},d.prototype.publicKeysWithoutSignature=function(){var t=this;return n.filter(this.publicKeys,function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]})},d.prototype.isValidSignature=function(t,e){return e.signature.nhashtype=e.sigtype,f.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script)},d.normalizeSignatures=function(t,e,r,n,i){return i.map(function(i){var s=null;return n=n.filter(function(n){if(s)return!0;var o=new p({signature:h.fromTxFormat(n),publicKey:i,prevTxId:e.prevTxId,outputIndex:e.outputIndex,inputIndex:r,sigtype:h.SIGHASH_ALL});return o.signature.nhashtype=o.sigtype,!f.verify(t,o.signature,o.publicKey,o.inputIndex,e.output.script)||(s=o,!1)}),s||null})},d.OPCODES_SIZE=1,d.SIGNATURE_SIZE=73,d.prototype._estimateSize=function(){return d.OPCODES_SIZE+this.threshold*d.SIGNATURE_SIZE},t.exports=d},function(t,e,r){"use strict";var n=r(0),i=r(21),s=r(20),o=r(15),u=r(1),a=r(11),h=r(7),f=r(14),c=(r(10),r(2)),p=r(22);function d(t,e,r,i){s.apply(this,arguments);var o=this;e=e||t.publicKeys,r=r||t.threshold,i=i||t.signatures,this.publicKeys=n.sortBy(e,function(t){return t.toString("hex")}),this.redeemScript=a.buildMultisigOut(this.publicKeys,r),u.checkState(a.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided public keys don't hash to the provided output"),this.publicKeyIndex={},n.each(this.publicKeys,function(t,e){o.publicKeyIndex[t.toString()]=e}),this.threshold=r,this.signatures=i?this._deserializeSignatures(i):new Array(this.publicKeys.length)}i(d,s),d.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=n.map(this.publicKeys,function(t){return t.toString()}),t.signatures=this._serializeSignatures(),t},d.prototype._deserializeSignatures=function(t){return n.map(t,function(t){if(t)return new p(t)})},d.prototype._serializeSignatures=function(){return n.map(this.signatures,function(t){if(t)return t.toObject()})},d.prototype.getSignatures=function(t,e,r,i){u.checkState(this.output instanceof o),i=i||h.SIGHASH_ALL;var s=this,a=[];return n.each(this.publicKeys,function(n){n.toString()===e.publicKey.toString()&&a.push(new p({publicKey:e.publicKey,prevTxId:s.prevTxId,outputIndex:s.outputIndex,inputIndex:r,signature:f.sign(t,e,i,r,s.redeemScript),sigtype:i}))}),a},d.prototype.addSignature=function(t,e){return u.checkState(!this.isFullySigned(),"All needed signatures have already been added"),u.checkArgument(!n.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),u.checkState(this.isValidSignature(t,e)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this._updateScript(),this},d.prototype._updateScript=function(){return this.setScript(a.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript})),this},d.prototype._createSignatures=function(){return n.map(n.filter(this.signatures,function(t){return!n.isUndefined(t)}),function(t){return c.concat([t.signature.toDER(),c.integerAsSingleByteBuffer(t.sigtype)])})},d.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},d.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},d.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},d.prototype.countSignatures=function(){return n.reduce(this.signatures,function(t,e){return t+!!e},0)},d.prototype.publicKeysWithoutSignature=function(){var t=this;return n.filter(this.publicKeys,function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]})},d.prototype.isValidSignature=function(t,e){return e.signature.nhashtype=e.sigtype,f.verify(t,e.signature,e.publicKey,e.inputIndex,this.redeemScript)},d.OPCODES_SIZE=7,d.SIGNATURE_SIZE=74,d.PUBKEY_SIZE=34,d.prototype._estimateSize=function(){return d.OPCODES_SIZE+this.threshold*d.SIGNATURE_SIZE+this.publicKeys.length*d.PUBKEY_SIZE},t.exports=d},function(t,e,r){"use strict";var n=r(8),i=r(13),s=r(4),o=function t(e){if(!(this instanceof t))return new t(e);if(Buffer.isBuffer(e))this.buf=e;else if("number"==typeof e){var r=e;this.fromNumber(r)}else if(e instanceof s){var n=e;this.fromBN(n)}else if(e){var i=e;this.set(i)}};o.prototype.set=function(t){return this.buf=t.buf||this.buf,this},o.prototype.fromString=function(t){return this.set({buf:new Buffer(t,"hex")}),this},o.prototype.toString=function(){return this.buf.toString("hex")},o.prototype.fromBuffer=function(t){return this.buf=t,this},o.prototype.fromBufferReader=function(t){return this.buf=t.readVarintBuf(),this},o.prototype.fromBN=function(t){return this.buf=n().writeVarintBN(t).concat(),this},o.prototype.fromNumber=function(t){return this.buf=n().writeVarintNum(t).concat(),this},o.prototype.toBuffer=function(){return this.buf},o.prototype.toBN=function(){return i(this.buf).readVarintBN()},o.prototype.toNumber=function(){return i(this.buf).readVarintNum()},t.exports=o},function(t,e,r){t.exports=r(57),t.exports.BlockHeader=r(27),t.exports.MerkleBlock=r(40)},function(t,e,r){"use strict";var n=r(0),i=r(27),s=r(4),o=r(2),u=r(13),a=r(8),h=r(5),f=r(25),c=r(1);function p(t){return this instanceof p?(n.extend(this,p._from(t)),this):new p(t)}p.MAX_BLOCK_SIZE=1e6,p._from=function(t){var e={};if(o.isBuffer(t))e=p._fromBufferReader(u(t));else{if(!n.isObject(t))throw new TypeError("Unrecognized argument for Block");e=p._fromObject(t)}return e},p._fromObject=function(t){var e=[];return t.transactions.forEach(function(t){t instanceof f?e.push(t):e.push(f().fromObject(t))}),{header:i.fromObject(t.header),transactions:e}},p.fromObject=function(t){return new p(p._fromObject(t))},p._fromBufferReader=function(t){var e={};c.checkState(!t.finished(),"No block data received"),e.header=i.fromBufferReader(t);var r=t.readVarintNum();e.transactions=[];for(var n=0;n<r;n++)e.transactions.push(f().fromBufferReader(t));return e},p.fromBufferReader=function(t){return c.checkArgument(t,"br is required"),new p(p._fromBufferReader(t))},p.fromBuffer=function(t){return p.fromBufferReader(new u(t))},p.fromString=function(t){var e=new Buffer(t,"hex");return p.fromBuffer(e)},p.fromRawBlock=function(t){o.isBuffer(t)||(t=new Buffer(t,"binary"));var e=u(t);return e.pos=p.Values.START_OF_BLOCK,new p(p._fromBufferReader(e))},p.prototype.toObject=p.prototype.toJSON=function(){var t=[];return this.transactions.forEach(function(e){t.push(e.toObject())}),{header:this.header.toObject(),transactions:t}},p.prototype.toBuffer=function(){return this.toBufferWriter().concat()},p.prototype.toString=function(){return this.toBuffer().toString("hex")},p.prototype.toBufferWriter=function(t){t||(t=new a),t.write(this.header.toBuffer()),t.writeVarintNum(this.transactions.length);for(var e=0;e<this.transactions.length;e++)this.transactions[e].toBufferWriter(t);return t},p.prototype.getTransactionHashes=function(){var t=[];if(0===this.transactions.length)return[p.Values.NULL_HASH];for(var e=0;e<this.transactions.length;e++)t.push(this.transactions[e]._getHash());return t},p.prototype.getMerkleTree=function(){for(var t=this.getTransactionHashes(),e=0,r=this.transactions.length;r>1;r=Math.floor((r+1)/2)){for(var n=0;n<r;n+=2){var i=Math.min(n+1,r-1),s=Buffer.concat([t[e+n],t[e+i]]);t.push(h.sha256sha256(s))}e+=r}return t},p.prototype.getMerkleRoot=function(){var t=this.getMerkleTree();return t[t.length-1]},p.prototype.validMerkleRoot=function(){var t=new s(this.header.merkleRoot.toString("hex"),"hex"),e=new s(this.getMerkleRoot().toString("hex"),"hex");return 0===t.cmp(e)},p.prototype._getHash=function(){return this.header._getHash()};var d={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=this.header.id),this._id},set:n.noop};Object.defineProperty(p.prototype,"id",d),Object.defineProperty(p.prototype,"hash",d),p.prototype.inspect=function(){return"<Block "+this.id+">"},p.Values={START_OF_BLOCK:8,NULL_HASH:new Buffer("0000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=p},function(t,e,r){t.exports=r(43),t.exports.Proposal=r(59)},function(t,e,r){"use strict";var n=r(0),i=r(1),s=r(43),o=r(6);function u(t){s.call(this,t)}(0,r(60).inherits)(u,s),u.prototype.dataHex=function(){var t=[["proposal",{end_epoch:this.end_epoch,name:this.name,payment_address:this.payment_address,payment_amount:this.payment_amount,start_epoch:this.start_epoch,type:this.type,url:this.url}]];return JSON.stringify(t)},u.prototype._newGovObject=function(){this.end_epoch="",this.name="",this.payment_address="",this.payment_amount="",this.start_epoch="",this.type="",this.url=""},u.prototype.fromObject=function(t){if(!(n.isObject(t)||t instanceof s)){try{var e=JSON.parse(t)}catch(t){throw new Error("Must be a valid stringified JSON")}return this.fromObject(e)}var r=t,i=this;if(n.each([["end_epoch","number"],["name","string"],["payment_address","string"],["payment_amount","number"],["start_epoch","number"],["type","number"],["url","string"]],function(t){var e=t[0],n=t[1];if(!r.hasOwnProperty(e))throw new Error("Must be a valid JSON - Property "+e+" missing");var s=typeof r[e];if(s!==n)throw new Error("Must be a valid JSON - Expected property "+e+" to be a "+n+" received:"+s);var o=r[e];if("number"===s&&isNaN(o))throw new Error("Must be a valid JSON - Expected property "+e+" to be a number");i[e]=r[e]}),r.type&&1!==r.type)throw new Error("Must be a valid proposal type.");return this},u.prototype.fromBufferReader=function(t){i.checkArgument(!t.finished(),"No data received");var e=t.read(t.buf.length),r=JSON.parse(e.toString("utf8"));if("Array"===r.constructor.name)this.type=r[0][0],this.end_epoch=r[0][1].end_epoch,this.name=r[0][1].name,this.payment_address=r[0][1].payment_address,this.payment_amount=r[0][1].payment_amount,this.start_epoch=r[0][1].start_epoch,this.type=r[0][1].type,this.url=r[0][1].url;else{if("Object"!==r.constructor.name)throw new Error("Invalid proposal");n.merge(this,r)}return this},u.prototype.getSerializationError=function(t){if(t=t||{},isNaN(this._verifyDateFormat(this.start_epoch)))return new o.GovObject.Proposal.invalidDate;if(isNaN(this._verifyDateFormat(this.end_epoch)))return new o.GovObject.Proposal.invalidDate;if(this.start_epoch>=this.end_epoch)return new o.GovObject.Proposal.invalidDateWindow;var e=Math.round((new Date).getTime()/1e3);return this.end_epoch<e?new o.GovObject.Proposal.invalidDateWindow:this._verifyAddress(this.payment_address,this.network)?this._verifyPayToScriptHash(this.payment_address,this.network)?new o.GovObject.Proposal.invalidP2SHAddress:this._verifyPayment(this.payment_amount)?new o.GovObject.Proposal.invalidPayment:this._verifyUrl(this.url)?this._verifyName(this.name)?void 0:new o.GovObject.Proposal.invalidName:new o.GovObject.Proposal.invalidUrl:new o.GovObject.Proposal.invalidAddress},t.exports=u},function(t,e){t.exports=require("util")},function(t,e,r){"use strict";var n=r(0),i=r(62),s=r(12),o=r(32),u=function(t,e){if(!(this instanceof u))return new u(t,e);if(this.extras={},this.knownParams=e||[],this.address=this.network=this.amount=this.message=null,"string"==typeof t){var r=u.parse(t);r.amount&&(r.amount=this._parseAmount(r.amount)),this._fromObject(r)}else{if("object"!=typeof t)throw new TypeError("Unrecognized data format.");this._fromObject(t)}};u.fromString=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return new u(t)},u.fromObject=function(t){return new u(t)},u.isValid=function(t,e){try{new u(t,e)}catch(t){return!1}return!0},u.parse=function(t){var e=i.parse(t,!0);if("dash:"!==e.protocol)throw new TypeError("Invalid dash URI");var r=/[^:]*:\/?\/?([^?]*)/.exec(t);return e.query.address=r&&r[1]||void 0,e.query},u.Members=["address","amount","message","label","r"],u.prototype._fromObject=function(t){if(!s.isValid(t.address))throw new TypeError("Invalid dash address");for(var e in this.address=new s(t.address),this.network=this.address.network,this.amount=t.amount,t)if("address"!==e&&"amount"!==e){if(/^req-/.exec(e)&&-1===this.knownParams.indexOf(e))throw Error("Unknown required argument "+e);(u.Members.indexOf(e)>-1?this:this.extras)[e]=t[e]}},u.prototype._parseAmount=function(t){if(t=Number(t),isNaN(t))throw new TypeError("Invalid amount");return o.fromBTC(t).toSatoshis()},u.prototype.toObject=u.prototype.toJSON=function(){for(var t={},e=0;e<u.Members.length;e++){var r=u.Members[e];this.hasOwnProperty(r)&&void 0!==this[r]&&(t[r]=this[r].toString())}return n.extend(t,this.extras),t},u.prototype.toString=function(){var t={};return this.amount&&(t.amount=o.fromSatoshis(this.amount).toBTC()),this.message&&(t.message=this.message),this.label&&(t.label=this.label),this.r&&(t.r=this.r),n.extend(t,this.extras),i.format({protocol:"dash:",host:this.address,query:t})},u.prototype.inspect=function(){return"<URI: "+this.toString()+">"},t.exports=u},function(t,e){t.exports=require("url")},function(t,e,r){"use strict";var n=r(0),i=r(18),s=r(10),o=r(12),u=r(8),a=r(28),h=r(7),f=r(5).sha256sha256,c=r(3),p=r(1),d=function t(e){return this instanceof t?(p.checkArgument(n.isString(e),"First argument should be a string"),this.message=e,this):new t(e)};d.MAGIC_BYTES=new Buffer("DarkCoin Signed Message:\n"),d.prototype.magicHash=function(){var t=u.varintBufNum(d.MAGIC_BYTES.length),e=new Buffer(this.message),r=u.varintBufNum(e.length),n=Buffer.concat([t,d.MAGIC_BYTES,r,e]);return f(n)},d.prototype._sign=function(t){p.checkArgument(t instanceof i,"First argument should be an instance of PrivateKey");var e=this.magicHash(),r=new a;return r.hashbuf=e,r.privkey=t,r.pubkey=t.toPublicKey(),r.signRandomK(),r.calci(),r.sig},d.prototype.sign=function(t){return this._sign(t).toCompact().toString("base64")},d.prototype._verify=function(t,e){p.checkArgument(t instanceof s,"First argument should be an instance of PublicKey"),p.checkArgument(e instanceof h,"Second argument should be an instance of Signature");var r=this.magicHash(),n=a.verify(r,e,t);return n||(this.error="The signature was invalid"),n},d.prototype.verify=function(t,e){p.checkArgument(t),p.checkArgument(e&&n.isString(e)),n.isString(t)&&(t=o.fromString(t));var r=h.fromCompact(new Buffer(e,"base64")),i=new a;i.hashbuf=this.magicHash(),i.sig=r;var s=i.toPublicKey(),u=o.fromPublicKey(s,t.network);return t.toString()!==u.toString()?(this.error="The signature did not match the message digest",!1):this._verify(s,r)},d.fromString=function(t){return new d(t)},d.fromJSON=function(t){return c.isValidJSON(t)&&(t=JSON.parse(t)),new d(t.message)},d.prototype.toObject=function(){return{message:this.message}},d.prototype.toJSON=function(){return JSON.stringify(this.toObject())},d.prototype.toString=function(){return this.message},d.prototype.inspect=function(){return"<Message: "+this.toString()+">"},t.exports=d}]);